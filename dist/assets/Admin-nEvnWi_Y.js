import{k as g,r as v,m as B,c as u,a as e,b as i,u as w,f as S,F as U,s as z,t as d,p as D,o as p,x as E,e as h,w as M,B as P}from"./index-SP6IRfbS.js";import{a as y}from"./axios-BhsMpkwj.js";import{V as _}from"./vue-spinner-tail-odXgjERA.js";import{t as b}from"./toast-BWxgGeSH.js";import{_ as F}from"./BaseModal-CGQ-Y19B.js";import{_ as x}from"./FormInput-D68lHcZY.js";import"./stringHelpers-DhATn_QK.js";const O={key:0,class:"fixed inset-0 flex items-center justify-center bg-white/70 backdrop-blur-sm z-50"},L={class:"flex flex-col items-center space-y-3"},R={key:1,class:"flex flex-col min-h-screen bg-gray-50"},T={key:0,class:"fixed inset-0 flex items-center justify-center bg-white/70 z-50"},I={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between bg-white border-b border-gray-200 px-4 py-3 shadow-sm"},q={class:"flex items-center gap-2"},G={key:1},H={class:"p-4"},J={class:"bg-white shadow-md rounded-lg overflow-hidden"},K={class:"w-full overflow-x-auto"},Q={class:"w-full text-sm text-left border-collapse"},W={class:"px-4 py-2"},X={class:"px-4 py-2"},Y={class:"px-4 py-2"},Z={class:"px-4 py-2"},ee={class:"px-4 py-2"},se={class:"px-4 py-2"},te={class:"px-4 py-2 text-center"},ae={class:"flex flex-col sm:flex-row gap-2 justify-center"},le=["onClick"],oe=["onClick"],ne={class:"flex justify-between items-center p-4 bg-gray-50 text-sm"},re=["disabled"],ie=["disabled"],de={key:2,class:"flex flex-col items-center justify-center h-[60vh] text-center"},ue={class:"space-y-4"},ve={__name:"Admin",setup(pe){const n=g({admins:{data:[]}}),o=v(!1),m=v(!1),f=v(!1),a=g({id:null,name:"",email:"",phone:"",region:"",status:"active",password:""});g({});const r=g({}),c=async(l="/admin/admins")=>{try{o.value=!0;const s=await y.get(l);n.admins=s.data.data}finally{o.value=!1}},V=()=>{f.value=!1,Object.assign(a,{id:null,name:"",email:"",phone:"",region:"",status:"active",password:""}),r.value={},m.value=!0},k=l=>{f.value=!0,Object.assign(a,l),a.password="",m.value=!0},A=async()=>{try{o.value=!0;const l=await y.post("/admin/admins",a);b.success(l.data.message),m.value=!1,c()}catch(l){console.log(l),l.response?.data?.errors&&Object.assign(r,l.response.data.errors)}finally{o.value=!1}},$=async()=>{try{o.value=!0;const l=await y.put(`/admin/admins/${a.id}`,a);b.success(l.data.message),m.value=!1,c()}catch(l){l.response?.data?.errors&&Object.assign(r,l.response.data.errors)}finally{o.value=!1}},C=async l=>{if(confirm("Are you sure you want to delete this admin?"))try{o.value=!0;const s=await y.delete(`/admin/admins/${l}`);b.success(s.data.message),c()}catch{b.error("Failed to delete admin")}finally{o.value=!1}};return B(()=>c()),(l,s)=>o.value?(p(),u("div",O,[e("div",L,[i(w(_),{size:"48px",color:"#2563eb"}),s[12]||(s[12]=e("p",{class:"text-blue-600 text-sm font-medium animate-pulse"}," Loading, please wait... ",-1))])])):(p(),u("div",R,[o.value?(p(),u("div",T,[i(w(_),{size:"48px",color:"#2563eb"})])):S("",!0),e("header",I,[e("div",q,[e("button",{onClick:s[0]||(s[0]=t=>l.$router.go(-1)),class:"flex items-center text-gray-600 hover:text-blue-600"},[...s[13]||(s[13]=[e("i",{class:"pi pi-arrow-left mr-1"},null,-1),e("span",null,"Back",-1)])]),s[14]||(s[14]=e("h1",{class:"text-lg font-semibold text-gray-800"},"Admins",-1))]),e("button",{class:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1.5 rounded-md flex items-center gap-2",onClick:s[1]||(s[1]=t=>V())},[...s[15]||(s[15]=[e("i",{class:"pi pi-plus"},null,-1),e("span",null,"Add Admin",-1)])])]),n.admins.data&&n.admins.data.length?(p(),u("div",G,[e("main",H,[e("div",J,[e("div",K,[e("table",Q,[s[18]||(s[18]=e("thead",{class:"bg-gray-100 text-gray-700 uppercase text-xs"},[e("tr",null,[e("th",{class:"px-4 py-3"},"#"),e("th",{class:"px-4 py-3"},"Name"),e("th",{class:"px-4 py-3"},"Email"),e("th",{class:"px-4 py-3"},"Phone"),e("th",{class:"px-4 py-3"},"Region"),e("th",{class:"px-4 py-3"},"Status"),e("th",{class:"px-4 py-3 text-center"},"Action")])],-1)),e("tbody",null,[(p(!0),u(U,null,z(n.admins.data,(t,j)=>(p(),u("tr",{key:t.id,class:"border-b border-gray-300 hover:bg-gray-50"},[e("td",W,d(j+1),1),e("td",X,d(t.name),1),e("td",Y,d(t.email),1),e("td",Z,d(t.phone),1),e("td",ee,d(t.region),1),e("td",se,[e("span",{class:E(["px-2 py-1 rounded-full text-xs font-semibold",t.status==="active"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"])},d(t.status),3)]),e("td",te,[e("div",ae,[e("button",{class:"bg-blue-600 text-white px-3 py-1 rounded-md w-full sm:w-auto text-center",onClick:N=>k(t)},[...s[16]||(s[16]=[e("i",{class:"pi pi-pencil"},null,-1),h(" Edit ",-1)])],8,le),e("button",{class:"bg-red-600 text-white px-3 py-1 rounded-md w-full sm:w-auto text-center",onClick:N=>C(t.id)},[...s[17]||(s[17]=[e("i",{class:"pi pi-trash"},null,-1),h(" Delete ",-1)])],8,oe)])])]))),128))])])]),e("div",ne,[e("button",{onClick:s[2]||(s[2]=t=>c(n.admins.prev_page_url)),disabled:!n.admins.prev_page_url,class:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50"}," Prev ",8,re),e("span",null,"Page "+d(n.admins.current_page)+" of "+d(n.admins.last_page),1),e("button",{onClick:s[3]||(s[3]=t=>c(n.admins.next_page_url)),disabled:!n.admins.next_page_url,class:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50"}," Next ",8,ie)])])])])):(p(),u("div",de,[...s[19]||(s[19]=[e("img",{src:"https://cdn-icons-png.flaticon.com/512/4076/4076549.png",alt:"No Data",class:"w-32 h-32 opacity-70 mb-4"},null,-1),e("h2",{class:"text-xl font-semibold text-gray-700 mb-2"}," No Admin Found ",-1),e("p",{class:"text-gray-500"}," Try adding new admins to see them listed here. ",-1)])])),i(F,{modelValue:m.value,"onUpdate:modelValue":s[10]||(s[10]=t=>m.value=t),title:f.value?"Edit Admin":"Add Admin",onSave:s[11]||(s[11]=t=>f.value?$():A()),disableSaveBtn:o.value},{default:D(()=>[e("div",ue,[i(x,{label:"Name",modelValue:a.name,"onUpdate:modelValue":s[4]||(s[4]=t=>a.name=t),error:r.name},null,8,["modelValue","error"]),i(x,{label:"Email",modelValue:a.email,"onUpdate:modelValue":s[5]||(s[5]=t=>a.email=t),error:r.email},null,8,["modelValue","error"]),i(x,{label:"Phone",modelValue:a.phone,"onUpdate:modelValue":s[6]||(s[6]=t=>a.phone=t),error:r.phone},null,8,["modelValue","error"]),i(x,{label:"Region",modelValue:a.region,"onUpdate:modelValue":s[7]||(s[7]=t=>a.region=t),error:r.region},null,8,["modelValue","error"]),M(e("select",{"onUpdate:modelValue":s[8]||(s[8]=t=>a.status=t),class:"border rounded-lg w-full px-3 py-2 focus:ring-blue-500"},[...s[20]||(s[20]=[e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1)])],512),[[P,a.status]]),i(x,{label:"Password",type:"password",modelValue:a.password,"onUpdate:modelValue":s[9]||(s[9]=t=>a.password=t),error:r.password},null,8,["modelValue","error"])])]),_:1},8,["modelValue","title","disableSaveBtn"])]))}};export{ve as default};
