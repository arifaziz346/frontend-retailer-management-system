import{r as p,j as v,l as F,c as n,a as t,b as m,u as w,n as b,y,F as U,q as z,h as E,z as L,o as l,t as _,w as h,f as M,v as k}from"./index-DppJ4uJc.js";import{f as I}from"./helper-B0BtwXvx.js";import{V as q}from"./vue-spinner-tail-D8qEx31J.js";import{t as A}from"./toast-kIWbnzaY.js";import{_ as R}from"./BaseModal-DaTHTPvo.js";import{a as x}from"./axios-pwxHYZIu.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./sweetalert2.esm.all-BQxta0Da.js";const O={key:0,class:"fixed inset-0 flex items-center justify-center bg-white/70 backdrop-blur-sm z-50"},G={class:"flex flex-col items-center space-y-3"},H={key:1,class:"bg-white p-4 rounded shadow m-1 shadow-1xl h-auto"},J={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between bg-white border-b border-gray-200 px-4 py-3 shadow-sm rounded-lg"},K={class:"flex items-center gap-3"},Q={class:"flex items-center space-x-2 text-sm md:text-base text-gray-600"},W={key:0,class:"w-full overflow-x-scroll border border-gray-300 rounded-md shadow-sm"},X={class:"min-w-full border border-gray-200 bg-white rounded-xl overflow-hidden shadow-sm text-xs sm:text-sm md:text-base"},Y={class:"px-4 py-2 text-gray-700"},Z={class:"px-4 py-2 text-gray-700"},ee={class:"px-4 py-2 font-medium text-gray-900"},te={class:"px-4 py-2 flex flex-col sm:flex-row justify-center gap-2"},se=["onClick"],oe=["onClick"],ae={key:1,class:"flex flex-col items-center justify-center h-[60vh] text-center"},ne={class:"w-full max-w-full overflow-x-hidden"},le={class:"mb-4"},re={key:0,class:"mt-1 text-sm text-red-600"},ce={class:"mb-4"},ie={__name:"Index_Account",setup(ue){E(),L();const i=p(!1),r=p(!1),u=p(!1),d=v({accounts:[],modal_action:"",employee_name:"",pagination:{currentPage:1,nextPageUrl:null,prevPageUrl:null,lastPage:1}}),s=v({id:"",account_name:"",account_number:""}),f=p(!1),C=()=>{u.value=!0,i.value=!0},V=o=>{s.id=o.id,s.account_name=o.account_name,s.account_number=o.account_number,u.value=!1,i.value=!0},N=async o=>{if(confirm("Do you want to delete..?")){console.log("delete-id",o);try{const c=(await x.delete(`/accounts/${o}`)).data;c.success&&(A.success(c.message),g(s.employee_id))}catch(e){console.log("fail to deleting account-",e)}}},j=async()=>{if(!D())try{r.value=!0;let o="";u.value?o=await x.post("/accounts",s):o=await x.put(`/accounts/${s.id}`,s);const e=o.data;e.success&&(i.value=!1,A.success(e.message),g(s.employee_id),Object.assign(s,{employee_id:"",account_name:""}))}catch(o){console.log("error creating account",o)}finally{r.value=!1}},D=()=>(f.value=s.account_name.trim()==="",f.value?(console.log("log is empty"),!0):(console.log("log is not empty"),!1)),g=async o=>{try{r.value=!0;const c=(await x.get("/accounts")).data.data.data;d.accounts=c}catch(e){console.log("error fetching accounts",e)}finally{r.value=!1}},P=()=>{s.account_name="",s.account_number=""};return F(async()=>{g(s.employee_id)}),(o,e)=>{const c=y("router-link"),B=y("Button"),$=y("Pagination");return r.value?(l(),n("div",O,[t("div",G,[m(w(q),{size:"48px",color:"#2563eb"}),e[6]||(e[6]=t("p",{class:"text-blue-600 text-sm font-medium animate-pulse"}," Loading, please wait... ",-1))])])):(l(),n("div",H,[t("header",J,[t("div",K,[t("button",{onClick:e[0]||(e[0]=a=>o.$router.back()),class:"flex items-center justify-center w-9 h-9 rounded-full hover:bg-gray-100 transition"},[...e[7]||(e[7]=[t("i",{class:"pi pi-arrow-left text-lg text-gray-700 hover:text-blue-600 hover:cursor-pointer"},null,-1)])]),t("nav",Q,[m(c,{to:"/admin/accounts",class:"flex items-center hover:text-blue-600 transition-colors"},{default:b(()=>[...e[8]||(e[8]=[t("i",{class:"pi pi-home mr-1 text-2xl"},null,-1),t("span",{class:"hidden sm:inline"},"Account",-1)])]),_:1})])]),m(B,{variant:"primary",size:"sm",class:"flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-lg shadow-sm transition-all duration-150 mt-3 sm:mt-0",onClick:e[1]||(e[1]=()=>{P(),u.value=!1,C()})},{default:b(()=>[...e[9]||(e[9]=[t("i",{class:"pi pi-plus text-sm"},null,-1),t("span",null,"Account",-1)])]),_:1})]),d.accounts&&d.accounts.length?(l(),n("div",W,[e[13]||(e[13]=t("div",{class:"w-full bg bg-gray-800 text-white p-1.5"},[t("i",{class:"pi pi-home mr-1 text-md"}," Account List")],-1)),t("table",X,[e[12]||(e[12]=t("thead",{class:"bg-gray-100 text-gray-700 text-xs"},[t("tr",null,[t("th",{class:"px-4 py-2 text-left font-semibold"},"Created-Date"),t("th",{class:"px-4 py-2 text-left font-semibold"},"Account-Name"),t("th",{class:"px-4 py-2 text-left font-semibold"},"Account-Number"),t("th",{class:"px-4 py-2 text-center font-semibold"},"Action")])],-1)),t("tbody",null,[(l(!0),n(U,null,z(d.accounts,(a,de)=>(l(),n("tr",{key:a.id,class:"border-t border-t-gray-300 hover:bg-gray-50 transition ext-sm text-xs"},[t("td",Y,_(w(I)(a.created_at)||"-"),1),t("td",Z,_(a.account_name||"-"),1),t("td",ee,_(a.account_number||"-"),1),t("td",te,[t("button",{onClick:S=>V(a),class:"flex flex-col sm:flex-row items-center gap-1 p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md shadow text-xs"},[...e[10]||(e[10]=[t("i",{class:"pi pi-pencil text-base"},null,-1),t("span",null,"Edit",-1)])],8,se),t("button",{onClick:S=>N(a.id),class:"flex flex-col sm:flex-row items-center gap-1 p-2 bg-red-500 hover:bg-red-600 text-white rounded-md shadow text-xs"},[...e[11]||(e[11]=[t("i",{class:"pi pi-trash text-base"},null,-1),t("span",null,"Delete",-1)])],8,oe)])]))),128))])]),m($,{pagination:d.pagination,onPageChange:o.fetchSuppliers},null,8,["pagination","onPageChange"])])):(l(),n("div",ae,[...e[14]||(e[14]=[t("img",{src:"https://cdn-icons-png.flaticon.com/512/4076/4076549.png",alt:"No Data",class:"w-32 h-32 opacity-70 mb-4"},null,-1),t("h2",{class:"text-xl font-semibold text-gray-700 mb-2"},"No Accounts Found",-1),t("p",{class:"text-gray-500"}," Try adding new account to see them listed here. ",-1)])])),m(R,{modelValue:i.value,"onUpdate:modelValue":e[4]||(e[4]=a=>i.value=a),title:"Create Account",onSave:e[5]||(e[5]=()=>(j(),u.value=!1)),disableSaveBtn:r.value},{default:b(()=>[t("div",ne,[t("div",le,[e[15]||(e[15]=t("label",{for:"account_name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"}," Account Name ",-1)),h(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=a=>s.account_name=a),id:"account_name",class:"block w-full max-w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},null,512),[[k,s.account_name]]),f.value?(l(),n("p",re," Account name is required ")):M("",!0)]),t("div",ce,[e[16]||(e[16]=t("label",{for:"account_number",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"}," Account Number ",-1)),h(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=a=>s.account_number=a),id:"account_number",class:"block w-full max-w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:text-white"},null,512),[[k,s.account_number]])])])]),_:1},8,["modelValue","disableSaveBtn"])]))}}},ve=T(ie,[["__scopeId","data-v-02329fb9"]]);export{ve as default};
