import{r as f,k,l as x,m as T,c as l,a as t,e as c,t as o,w as u,v as y,C as D,f as F,F as p,x as N,o as n,y as m}from"./index-D2-y90KB.js";import{a as R}from"./axios-CBe-jvwZ.js";const S={class:"min-h-screen bg-gray-50 p-3 md:p-6 font-sans text-gray-800"},W={class:"max-w-7xl mx-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6"},V={class:"bg-white border border-emerald-100 rounded-2xl p-4 shadow-sm flex items-center gap-4 transition-transform hover:scale-[1.02]"},L={class:"min-w-0"},j={class:"text-xl xl:text-2xl font-black text-emerald-600 truncate"},A={class:"bg-white border border-rose-100 rounded-2xl p-4 shadow-sm flex items-center gap-4 transition-transform hover:scale-[1.02]"},C={class:"min-w-0"},M={class:"text-xl xl:text-2xl font-black text-blue-600 truncate"},B={class:"bg-white border border-amber-100 rounded-2xl p-4 shadow-sm flex items-center gap-4 transition-transform hover:scale-[1.02] sm:col-span-2 lg:col-span-1"},U={class:"min-w-0"},z={class:"text-xl xl:text-2xl font-black text-rose-600 truncate"},E={class:"max-w-7xl mx-auto bg-white rounded-2xl shadow-sm border border-gray-100 p-5 mb-6"},G={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 items-end"},I={class:"flex flex-col gap-1.5"},O={class:"flex flex-col gap-1.5"},P={class:"flex flex-col gap-1.5"},q=["disabled"],H={key:0,class:"pi pi-spin pi-spinner"},J={key:1,class:"pi pi-search"},K={class:"max-w-7xl mx-auto bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden"},Q={class:"overflow-x-auto"},X={class:"w-full text-left border-collapse"},Y={class:"divide-y divide-gray-50"},Z={class:"px-6 py-4 text-xs font-bold text-gray-400"},$={class:"px-6 py-4"},tt={class:"font-bold text-gray-700"},et={class:"px-6 py-4 text-center"},st={class:"px-6 py-4"},at={class:"px-6 py-4 max-w-xs"},ot=["title"],rt={class:"px-6 py-4 text-right"},lt={class:"text-xs font-semibold text-gray-400"},nt={key:0},pt={__name:"Report_Transaction",setup(it){const d=f(!1),i=f([]),g=()=>new Date().toISOString().split("T")[0],r=k({start_date:g(),end_date:g(),transaction_type:""}),b=async()=>{try{d.value=!0;const{data:a}=await R.get("/reports/transactions",{params:{start_date:r.start_date||null,end_date:r.end_date||null,transaction_type:r.transaction_type||null}});i.value=a.data??[]}catch(a){console.error("Transaction fetch failed:",a),i.value=[]}finally{d.value=!1}},_=x(()=>i.value.filter(a=>a.transaction_type==="Deposit").reduce((a,e)=>a+Number(e.amount||0),0)),h=x(()=>i.value.filter(a=>a.transaction_type==="Withdraw").reduce((a,e)=>a+Number(e.amount||0),0)),w=x(()=>i.value.filter(a=>a.transaction_type==="Failed").reduce((a,e)=>a+Number(e.amount||0),0));return T(()=>{b()}),(a,e)=>(n(),l("div",S,[e[15]||(e[15]=t("div",{class:"max-w-7xl mx-auto mb-6"},[t("h2",{class:"text-xl md:text-2xl font-extrabold text-gray-900 tracking-tight flex items-center gap-2"},[t("i",{class:"pi pi-wallet text-blue-600"}),c(" Transaction Report ")]),t("p",{class:"text-sm text-gray-500"},"Monitor and analyze your monthly financial flows.")],-1)),t("div",W,[t("div",V,[e[4]||(e[4]=t("div",{class:"w-12 h-12 rounded-full bg-emerald-50 flex-shrink-0 flex items-center justify-center text-emerald-600"},[t("i",{class:"pi pi-arrow-down-left text-xl font-bold"})],-1)),t("div",L,[e[3]||(e[3]=t("p",{class:"text-[10px] font-black text-gray-400 uppercase tracking-widest truncate"},"Total Deposits",-1)),t("h3",j," Rs. "+o(_.value.toLocaleString()),1)])]),t("div",A,[e[6]||(e[6]=t("div",{class:"w-12 h-12 rounded-full bg-rose-50 flex-shrink-0 flex items-center justify-center text-rose-600"},[t("i",{class:"pi pi-arrow-up-right text-xl font-bold"})],-1)),t("div",C,[e[5]||(e[5]=t("p",{class:"text-[10px] font-black text-gray-400 uppercase tracking-widest truncate"},"Total Withdrawals",-1)),t("h3",M," Rs. "+o(h.value.toLocaleString()),1)])]),t("div",B,[e[8]||(e[8]=t("div",{class:"w-12 h-12 rounded-full bg-amber-50 flex-shrink-0 flex items-center justify-center text-amber-600"},[t("i",{class:"pi pi-times-circle text-xl font-bold"})],-1)),t("div",U,[e[7]||(e[7]=t("p",{class:"text-[10px] font-black text-gray-400 uppercase tracking-widest truncate"},"Total Failed",-1)),t("h3",z," Rs. "+o(w.value.toLocaleString()),1)])])]),t("div",E,[t("div",G,[t("div",I,[e[9]||(e[9]=t("label",{class:"text-[11px] font-black text-gray-400 uppercase ml-1"},"Start Date",-1)),u(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=s=>r.start_date=s),class:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:bg-white outline-none transition-all text-sm font-semibold"},null,512),[[y,r.start_date]])]),t("div",O,[e[10]||(e[10]=t("label",{class:"text-[11px] font-black text-gray-400 uppercase ml-1"},"End Date",-1)),u(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=s=>r.end_date=s),class:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:bg-white outline-none transition-all text-sm font-semibold"},null,512),[[y,r.end_date]])]),t("div",P,[e[12]||(e[12]=t("label",{class:"text-[11px] font-black text-gray-400 uppercase ml-1"},"Transaction Type",-1)),u(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>r.transaction_type=s),class:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:bg-white outline-none transition-all text-sm font-semibold"},[...e[11]||(e[11]=[t("option",{value:""},"All Transactions",-1),t("option",{value:"Withdraw"},"Withdraw",-1),t("option",{value:"Deposit"},"Deposit",-1),t("option",{value:"Failed"},"Failed",-1)])],512),[[D,r.transaction_type]])]),t("button",{onClick:b,disabled:d.value,class:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 text-white font-bold py-2.5 rounded-xl shadow-lg shadow-blue-100 transition-all flex items-center justify-center gap-2"},[d.value?(n(),l("i",H)):(n(),l("i",J)),c(" "+o(d.value?"Processing...":"Generate Report"),1)],8,q)])]),t("div",K,[t("div",Q,[t("table",X,[e[14]||(e[14]=t("thead",null,[t("tr",{class:"bg-gray-50 border-b border-gray-100"},[t("th",{class:"px-6 py-4 text-[11px] font-black text-gray-400 uppercase tracking-wider"},"#"),t("th",{class:"px-6 py-4 text-[11px] font-black text-gray-400 uppercase tracking-wider"},"Account Information"),t("th",{class:"px-6 py-4 text-[11px] font-black text-gray-400 uppercase tracking-wider text-center"},"Type"),t("th",{class:"px-6 py-4 text-[11px] font-black text-gray-400 uppercase tracking-wider"},"Amount"),t("th",{class:"px-6 py-4 text-[11px] font-black text-gray-400 uppercase tracking-wider"},"Reference/Description"),t("th",{class:"px-6 py-4 text-[11px] font-black text-gray-400 uppercase tracking-wider text-right"},"Date")])],-1)),t("tbody",Y,[(n(!0),l(p,null,N(i.value,(s,v)=>(n(),l("tr",{key:s.id,class:"hover:bg-blue-50/20 transition-colors group"},[t("td",Z,o(v+1),1),t("td",$,[t("span",tt,o(s.account?.name||"General Account"),1)]),t("td",et,[t("span",{class:m([{"bg-emerald-50 text-emerald-600 border-emerald-100":s.transaction_type==="Deposit","bg-blue-50 text-blue-600 border-blue-100":s.transaction_type==="Withdraw","bg-rose-50 text-rose-600 border-rose-100":s.transaction_type==="Failed"},"px-3 py-1 rounded-full text-[10px] font-black uppercase border tracking-tighter"])},o(s.transaction_type),3)]),t("td",st,[t("span",{class:m([{"text-emerald-600":s.transaction_type==="Deposit","text-blue-600":s.transaction_type==="Withdraw","text-rose-600":s.transaction_type==="Failed"},"font-black"])},[s.transaction_type==="Deposit"?(n(),l(p,{key:0},[c("+")],64)):s.transaction_type==="Withdraw"?(n(),l(p,{key:1},[c("-")],64)):(n(),l(p,{key:2},[],64)),c(" Rs. "+o(s.amount),1)],2)]),t("td",at,[t("p",{class:"text-xs text-gray-500 truncate",title:s.description},o(s.description||"No description provided"),9,ot)]),t("td",rt,[t("span",lt,o(s.transaction_date),1)])]))),128)),i.value.length===0?(n(),l("tr",nt,[...e[13]||(e[13]=[t("td",{colspan:"6",class:"px-6 py-20 text-center"},[t("div",{class:"flex flex-col items-center"},[t("i",{class:"pi pi-folder-open text-5xl text-gray-200 mb-3"}),t("p",{class:"text-gray-500 font-bold"},"No transactions found for this period."),t("p",{class:"text-xs text-gray-400 mt-1"},"Try changing your filters or date range.")])],-1)])])):F("",!0)])])])])]))}};export{pt as default};
