import{d as w,r as d,c as l,a as s,e as m,w as p,f as g,v as c,t as f,F as x,b as y,u as h,g as k,h as V,o as i}from"./index-Bo1dTLXg.js";import{V as L}from"./vue-spinner-tail-Wj6EeOA1.js";import{a as S}from"./axios-fk7X2WD2.js";const _={class:"w-full max-w-md bg-white rounded-2xl shadow-xl p-8 space-y-6 border border-gray-100"},A={key:0,class:"text-red-500 text-sm mt-1"},D={key:0,class:"text-red-500 text-sm mt-1"},N=["disabled"],M={__name:"Login",setup(B){const u=V(),b=w(),t=d({email:"",password:""}),o=d({}),n=d(!1),v=async()=>{o.value={},n.value=!0;try{console.log("ðŸ”¹ Starting login...");const a=await S.post("/admin/login",{email:t.value.email,password:t.value.password});if(console.log("âœ… Login response:",a.data),a.data.status){const{access_token:e,user:r}=a.data;b.setAuth(r,e),r.role==="admin"?await u.push("/admin/sale"):await u.push("/user/index")}}catch(a){console.error("âŒ Login error:",a),a.response?.data?.errors?o.value=a.response.data.errors:a.response?.data?.message?o.value={email:[a.response.data.message]}:o.value={email:["Something went wrong. Please try again."]}}finally{n.value=!1}};return(a,e)=>(i(),l("div",_,[e[5]||(e[5]=s("div",{class:"text-center"},[s("h1",{class:"text-3xl font-bold text-gray-800"},"Chitral Steel ðŸ‘‹"),s("p",{class:"text-sm text-gray-500 mt-1"},[m(" Login to continue to "),s("span",{class:"font-semibold text-indigo-600"},"Admin Dashboard")])],-1)),s("form",{onSubmit:k(v,["prevent"]),class:"space-y-5"},[s("div",null,[e[2]||(e[2]=s("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-1"},"Email Address",-1)),p(s("input",{id:"email",type:"email","onUpdate:modelValue":e[0]||(e[0]=r=>t.value.email=r),placeholder:"admin@example.com",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[c,t.value.email]]),o.value.email?(i(),l("p",A,f(o.value.email),1)):g("",!0)]),s("div",null,[e[3]||(e[3]=s("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-1"},"Password",-1)),p(s("input",{id:"password",type:"password","onUpdate:modelValue":e[1]||(e[1]=r=>t.value.password=r),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[c,t.value.password]]),o.value.password?(i(),l("p",D,f(o.value.password),1)):g("",!0)]),s("button",{type:"submit",class:"w-full py-3 bg-indigo-600 text-white rounded-xl font-semibold hover:bg-indigo-700 transition flex justify-center items-center",disabled:n.value},[n.value?(i(),l(x,{key:0},[y(h(L),{size:"20px",color:"#fff"}),e[4]||(e[4]=s("span",{class:"ml-2"},"Logging in...",-1))],64)):(i(),l(x,{key:1},[m(" Login ")],64))],8,N)],32)]))}};export{M as default};
