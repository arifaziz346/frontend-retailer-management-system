import{r as V,s as L,c as m,o as p,a as e,f as $,t as h,u as I,F as S,x as C,k,m as B,b,e as O,q as D,w as M,v as N}from"./index-BcK-tVU9.js";import{a as A}from"./axios-CBe-jvwZ.js";import{t as j}from"./toast-BWxgGeSH.js";import{_ as E}from"./BaseModal-D9o4PNkd.js";import{_ as v}from"./FormInput-CW0rZXhQ.js";import{V as F}from"./vue-spinner-tail-E7jUqB7a.js";import"./stringHelpers-DhATn_QK.js";const P=()=>{const x=(l,o)=>l.length>o?l.slice(0,o)+"...":l,f=l=>Array.isArray(l)?l[0]?.replace(/^\[?"?|"?\]?$/g,"").replace(/\.$/,""):String(l).replace(/^\[?"?|"?\]?$/g,"").replace(/\.$/,"");function r(l){if(!l)return"";let o=[];return Array.isArray(l)?o=l:typeof l=="object"?o=Object.values(l).flat():o=[String(l)],o.join(`
`)}return{limitDisplayText:x,cleanError:f,formatErrors:r,cleanText:l=>String(l).replace(/[^a-zA-Z0-9\s.,-]/g,"").trim()}},T={class:"flex flex-col gap-2"},R={class:"text-sm font-medium text-gray-700"},z=["multiple"],q={key:0,class:"text-sm md:xs text-red-500 mt-1 whitespace-pre-line"},H={class:"flex flex-wrap gap-3 mt-3 max-h-[350px] overflow-y-auto pr-1"},Z=["src"],G=["onClick"],J={__name:"ImageUploader",props:{modelValue:{type:[Array,String],default:()=>[]},label:{type:String,default:"Upload Images"},error:{type:String,default:""},multiple:{type:Boolean,default:!0}},emits:["update:modelValue","removeVariantImage"],setup(x,{emit:f}){const{formatErrors:r}=P(),u=x,l=f,o=V([]);L(()=>u.modelValue,i=>{if(!i){o.value=[];return}const d=Array.isArray(i)?i:[i];o.value=d.map(c=>typeof c=="string"?c:URL.createObjectURL(c))},{immediate:!0});const s=i=>{const d=Array.from(i.target.files),c=d.map(y=>URL.createObjectURL(y));o.value=u.multiple?[...c,...o.value]:c,l("update:modelValue",u.multiple?[...d,...Array.isArray(u.modelValue)?u.modelValue:[]]:d)},w=i=>{if(l("removeVariantImage"),o.value.splice(i,1),Array.isArray(u.modelValue)){const d=[...u.modelValue];d.splice(i,1),l("update:modelValue",d)}else l("update:modelValue",null)};return(i,d)=>(p(),m("div",T,[e("label",R,h(x.label),1),e("input",{type:"file",multiple:x.multiple,accept:"image/*",onChange:s,class:"text-sm text-gray-500 file:mr-3 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,40,z),x.error?(p(),m("p",q,h(I(r)(x.error)),1)):$("",!0),e("div",H,[(p(!0),m(S,null,C(o.value,(c,y)=>(p(),m("div",{key:y,class:"relative w-[200px] h-[300px] border rounded-lg overflow-hidden"},[e("img",{src:c,alt:"preview",class:"object-cover w-full h-full"},null,8,Z),e("button",{type:"button",class:"absolute top-1 right-1 bg-red-500 text-white text-xs px-2 py-1 rounded",onClick:U=>w(y)}," âœ• ",8,G)]))),128))])]))}},K={class:"flex flex-col min-h-screen bg-slate-50"},Q={key:0,class:"fixed inset-0 flex items-center justify-center bg-white/80 backdrop-blur-sm z-50"},W={class:"flex flex-col items-center"},X={class:"bg-white border-b border-slate-200 px-6 py-4 shadow-sm flex flex-col sm:flex-row justify-between items-center gap-4"},Y={class:"p-6"},ee={class:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden"},te={key:0,class:"overflow-x-auto"},le={class:"w-full text-sm text-left"},oe={class:"divide-y divide-slate-100"},se={class:"hover:bg-slate-50 transition-colors"},ae={class:"px-6 py-4"},ne=["src"],re={key:1,class:"w-12 h-12 rounded bg-slate-100 flex items-center justify-center text-slate-400"},ie={class:"px-6 py-4 font-semibold text-slate-800"},de={class:"px-6 py-4 text-slate-600"},ue={class:"flex flex-col"},me={class:"text-xs text-slate-400"},pe={class:"px-6 py-4 text-slate-600"},ce={class:"px-6 py-4 text-center"},be={class:"flex justify-center gap-2"},fe={key:1,class:"py-20 text-center"},ge={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},xe={class:"md:col-span-2"},ye={class:"md:col-span-2"},$e={__name:"About",setup(x){const f=V(!1),r=V(!1),u=V(null),l=k({about:null}),o=k({}),s=k({id:null,name:"",phone_number:"",additional_phone:"",land_line_number:"",address:"",city:"",email:"",operating_hours:"",facebook:"",instagram:"",youtube:"",embed_map_link:"",logo:null}),w=()=>{l.about?y(l.about):(i(),f.value=!0)},i=()=>{Object.assign(s,{id:null,name:"",phone_number:"",additional_phone:"",address:"",city:"",email:"",operating_hours:"",facebook:"",instagram:"",youtube:"",embed_map_link:"",logo:null}),u.value=null,Object.keys(o).forEach(n=>o[n]="")},d=async()=>{r.value=!0;try{const n=await A.get("/admin/about");l.about=n.data.data}finally{r.value=!1}},c=async()=>{r.value=!0;for(const n in o)o[n]="";try{const n=new FormData;for(const _ in s){const g=s[_];g===null||g===""||g===void 0||_==="image_url"||(_==="logo"?g instanceof File?n.append(_,g):Array.isArray(g)&&g[0]instanceof File&&n.append(_,g[0]):n.append(_,g))}const t=s.id?`/admin/update-about/${s.id}`:"/admin/about",a=await A.post(t,n);j.success(a.data.message),f.value=!1,await d()}catch(n){n.response?.data?.errors&&Object.assign(o,n.response.data.errors)}finally{r.value=!1}},y=n=>{console.log("edit ",n.image_url),Object.assign(s,n),s.logo=n.image_url||null,f.value=!0},U=async n=>{if(confirm("Delete this information?"))try{r.value=!0,await A.delete(`/admin/about/${n}`),j.success("Information deleted"),l.about=null}finally{r.value=!1}};return B(d),(n,t)=>(p(),m("div",K,[r.value?(p(),m("div",Q,[e("div",W,[b(I(F),{size:"50px",color:"#2563eb"}),t[12]||(t[12]=e("p",{class:"text-blue-600 font-medium mt-2"},"Processing...",-1))])])):$("",!0),e("header",X,[t[14]||(t[14]=e("div",null,[e("h1",{class:"text-xl font-bold text-slate-800"},"Business Information"),e("p",{class:"text-sm text-slate-500"},"Manage your contact details and social links")],-1)),l.about?$("",!0):(p(),m("button",{key:0,onClick:w,class:"bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-lg flex items-center gap-2 transition-all shadow-md active:scale-95"},[...t[13]||(t[13]=[e("i",{class:"pi pi-plus"},null,-1),O(" Add Information ",-1)])]))]),e("main",Y,[e("div",ee,[l.about?(p(),m("div",te,[e("table",le,[t[18]||(t[18]=e("thead",{class:"bg-slate-50 text-slate-600 uppercase text-xs font-bold tracking-wider"},[e("tr",null,[e("th",{class:"px-6 py-4 border-b"},"Logo"),e("th",{class:"px-6 py-4 border-b"},"Business Name"),e("th",{class:"px-6 py-4 border-b"},"Contact Info"),e("th",{class:"px-6 py-4 border-b"},"Location"),e("th",{class:"px-6 py-4 border-b text-center"},"Actions")])],-1)),e("tbody",oe,[e("tr",se,[e("td",ae,[l.about.image_url?(p(),m("img",{key:0,src:l.about.image_url,class:"w-12 h-12 object-contain rounded bg-slate-100 p-1",alt:"Logo"},null,8,ne)):(p(),m("div",re,[...t[15]||(t[15]=[e("i",{class:"pi pi-image"},null,-1)])]))]),e("td",ie,h(l.about.name),1),e("td",de,[e("div",ue,[e("span",null,h(l.about.email),1),e("span",me,h(l.about.phone_number),1)])]),e("td",pe,h(l.about.city),1),e("td",ce,[e("div",be,[e("button",{onClick:t[0]||(t[0]=a=>y(l.about)),class:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"Edit"},[...t[16]||(t[16]=[e("i",{class:"pi pi-pencil"},null,-1)])]),e("button",{onClick:t[1]||(t[1]=a=>U(l.about.id)),class:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Delete"},[...t[17]||(t[17]=[e("i",{class:"pi pi-trash"},null,-1)])])])])])])])])):(p(),m("div",fe,[...t[19]||(t[19]=[e("img",{src:"https://cdn-icons-png.flaticon.com/512/4076/4076549.png",class:"w-24 mx-auto opacity-20 mb-4"},null,-1),e("h3",{class:"text-slate-400 font-medium"},"No about information recorded yet",-1)])]))])]),b(E,{modelValue:f.value,"onUpdate:modelValue":t[11]||(t[11]=a=>f.value=a),title:s.id?"Update Business Information":"Add Business Information",onSave:c,disableSaveBtn:r.value},{default:D(()=>[e("div",ge,[e("div",xe,[b(J,{modelValue:s.logo,"onUpdate:modelValue":t[2]||(t[2]=a=>s.logo=a),label:"Logo",error:o.logo,multiple:!1,preview:u.value},null,8,["modelValue","error","preview"])]),b(v,{label:"Name",modelValue:s.name,"onUpdate:modelValue":t[3]||(t[3]=a=>s.name=a),error:o.name},null,8,["modelValue","error"]),b(v,{label:"Email",type:"email",modelValue:s.email,"onUpdate:modelValue":t[4]||(t[4]=a=>s.email=a),error:o.email},null,8,["modelValue","error"]),b(v,{label:"Phone 1",modelValue:s.phone_number,"onUpdate:modelValue":t[5]||(t[5]=a=>s.phone_number=a),error:o.phone_number},null,8,["modelValue","error"]),b(v,{label:"Phone 2 (Optional)",modelValue:s.additional_phone,"onUpdate:modelValue":t[6]||(t[6]=a=>s.additional_phone=a),error:o.additional_phone},null,8,["modelValue","error"]),b(v,{label:"Land Line Number 2 (Optional)",modelValue:s.land_line_number,"onUpdate:modelValue":t[7]||(t[7]=a=>s.land_line_number=a),error:o.land_line_number},null,8,["modelValue","error"]),b(v,{label:"City",modelValue:s.city,"onUpdate:modelValue":t[8]||(t[8]=a=>s.city=a),error:o.city},null,8,["modelValue","error"]),b(v,{label:"Hours",modelValue:s.operating_hours,"onUpdate:modelValue":t[9]||(t[9]=a=>s.operating_hours=a),error:o.operating_hours,placeholder:"e.g. 9AM - 9PM"},null,8,["modelValue","error"]),e("div",ye,[t[20]||(t[20]=e("label",{class:"block text-sm font-semibold text-slate-700 mb-1"},"Address",-1)),M(e("textarea",{"onUpdate:modelValue":t[10]||(t[10]=a=>s.address=a),rows:"3",class:"w-full p-2 border border-slate-300 rounded-lg text-sm focus:ring-blue-500"},null,512),[[N,s.address]])])])]),_:1},8,["modelValue","title","disableSaveBtn"])]))}};export{$e as default};
