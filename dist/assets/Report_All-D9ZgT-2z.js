import{a as w}from"./axios-CBe-jvwZ.js";import{r as f,l as k,c as l,o,a as e,t as d,w as b,f as C,C as N,B as R,v as g,F as y,x,y as D,m as F,b as v,u as V}from"./index-DRH77bNi.js";import{V as $}from"./vue-spinner-tail-BfDaZOI0.js";const L={class:"w-full bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden"},S={class:"p-6 border-b border-slate-100 bg-slate-50/30"},A={class:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4"},I={class:"text-xl font-bold text-slate-800"},T={class:"text-slate-500 text-xs mt-1 font-medium uppercase tracking-wider"},B={class:"flex flex-wrap items-center gap-2"},U={key:0,class:"flex items-center gap-2 animate-in fade-in duration-300"},j=["disabled"],E={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 p-6 bg-slate-50/50"},M={class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},P={class:"text-lg font-extrabold text-slate-900 mt-1 truncate"},z={class:"overflow-x-auto"},G={class:"w-full text-left border-collapse"},O={class:"bg-slate-100/50 border-y border-slate-200"},q={class:"divide-y divide-slate-100"},W={key:0,class:"hover:bg-blue-50/30 transition-colors"},H={key:1},Y=["colspan"],J={__name:"Report",props:{data:{type:Object,required:!0},columns:{type:Array,required:!0},title:{type:String,default:"Financial Report"},isLoading:{type:Boolean,default:!1}},emits:["filter"],setup(n,{emit:c}){const p=c,t=f({type:"daily",start_date:"",end_date:""}),m=()=>{t.value.type!=="custom"&&(t.value.start_date="",t.value.end_date="",u())},u=()=>{if(t.value.type==="custom"&&(!t.value.start_date||!t.value.end_date)){alert("Please select both dates for the range.");return}p("filter",{...t.value})},r=i=>{const a=Number(i)||0;return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(a).replace("₹","₨ ")},h=(i,a)=>{const s=Number(a)||0;return i==="profit"?s>=0?"text-emerald-600":"text-rose-600":i==="expense"||i==="discount"?"text-rose-500":"text-slate-700"},_=k(()=>{if(t.value.type==="custom"&&t.value.start_date)return`Range: ${t.value.start_date} to ${t.value.end_date||"..."}`;const i=new Date().toLocaleDateString("en-GB");return`${t.value.type.toUpperCase()} Report | Updated ${i}`});return(i,a)=>(o(),l("div",L,[e("div",S,[e("div",A,[e("div",null,[e("h1",I,d(n.title),1),e("p",T,d(_.value),1)]),e("div",B,[b(e("select",{"onUpdate:modelValue":a[0]||(a[0]=s=>t.value.type=s),onChange:m,class:"bg-white border border-slate-300 text-slate-700 text-sm rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-blue-500/20 font-medium"},[...a[3]||(a[3]=[R('<option value="daily">Today</option><option value="weekly">Weekly</option><option value="15days">15 Days</option><option value="6months">6 Months</option><option value="yearly">Yearly</option>',5)])],544),[[N,t.value.type]]),t.value.type==="custom"?(o(),l("div",U,[b(e("input",{type:"date","onUpdate:modelValue":a[1]||(a[1]=s=>t.value.start_date=s),class:"bg-white border border-slate-300 text-slate-700 text-sm rounded-lg px-2 py-2 outline-none focus:ring-2 focus:ring-blue-500/20"},null,512),[[g,t.value.start_date]]),a[4]||(a[4]=e("span",{class:"text-slate-400 text-xs font-bold"},"TO",-1)),b(e("input",{type:"date","onUpdate:modelValue":a[2]||(a[2]=s=>t.value.end_date=s),class:"bg-white border border-slate-300 text-slate-700 text-sm rounded-lg px-2 py-2 outline-none focus:ring-2 focus:ring-blue-500/20"},null,512),[[g,t.value.end_date]])])):C("",!0),e("button",{onClick:u,disabled:n.isLoading,class:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-5 rounded-lg transition-all text-sm disabled:bg-slate-300"},d(n.isLoading?"Syncing...":t.value.type==="custom"?"Apply Range":"Generate"),9,j)])])]),e("div",E,[(o(!0),l(y,null,x(n.columns.slice(0,4),s=>(o(),l("div",{key:s.key,class:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm"},[e("span",M,d(s.label),1),e("div",P,d(r(n.data[s.key])),1)]))),128))]),e("div",z,[e("table",G,[e("thead",null,[e("tr",O,[(o(!0),l(y,null,x(n.columns,s=>(o(),l("th",{key:s.key,class:"px-6 py-3 text-[11px] font-bold text-slate-500 uppercase tracking-tighter"},d(s.label),1))),128))])]),e("tbody",q,[Object.keys(n.data).length?(o(),l("tr",W,[(o(!0),l(y,null,x(n.columns,s=>(o(),l("td",{key:s.key,class:"px-6 py-4 text-sm font-semibold"},[e("span",{class:D(h(s.key,n.data[s.key]))},d(r(n.data[s.key])),3)]))),128))])):(o(),l("tr",H,[e("td",{colspan:n.columns.length,class:"px-6 py-10 text-center text-slate-400 text-sm italic"}," No financial records found for this period. ",8,Y)]))])])])]))}},K={class:"min-h-screen bg-slate-50 p-4 lg:p-8"},Q={key:0,class:"fixed inset-0 flex items-center justify-center bg-slate-900/20 backdrop-blur-sm z-50 transition-all"},X={class:"bg-white p-8 rounded-2xl shadow-2xl flex flex-col items-center border border-slate-100"},Z={key:1,class:"max-w-7xl mx-auto space-y-6"},ee={class:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden"},le={__name:"Report_All",setup(n){const c=f(!1),p=f({}),t=[{label:"Total Sales",key:"sale",icon:"trending-up"},{label:"Profit",key:"profit",icon:"dollar-sign"},{label:"Expenses",key:"expense",icon:"credit-card"},{label:"Discounts",key:"discount",icon:"percent"},{label:"Credit (Cust)",key:"credit_customer",icon:"users"},{label:"Withdrawals",key:"account_withdraw",icon:"arrow-up-right"},{label:"Deposits",key:"account_deposit",icon:"arrow-down-left"},{label:"Cash In Hand",key:"cash_in_hand",icon:"wallet"}],m=async u=>{c.value=!0;try{const{data:r}=await w.get("/reports/all",{params:u});p.value=r}catch(r){console.error("Report error:",r)}finally{c.value=!1}};return F(()=>m({type:"daily"})),(u,r)=>(o(),l("div",K,[c.value?(o(),l("div",Q,[e("div",X,[v(V($),{size:"50px",color:"#2563eb"}),r[0]||(r[0]=e("p",{class:"mt-4 text-slate-600 font-semibold animate-pulse tracking-wide"}," PREPARING FINANCIAL DATA ",-1))])])):(o(),l("div",Z,[e("div",ee,[v(J,{data:p.value,columns:t,onFilter:m,title:"Executive Financial Summary",isLoading:c.value},null,8,["data","isLoading"])])]))]))}};export{le as default};
