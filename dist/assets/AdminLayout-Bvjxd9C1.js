import{r as v,j as N,k as B,l as M,m as z,p as O,c as u,o as l,a as e,b as r,t as _,q as y,f as h,e as k,T as A,F as V,s as R,x as L,y as $,g as D,z as F,i as J,A as Y,u as q,R as W}from"./index-D2-y90KB.js";import{S as w}from"./toast-BWxgGeSH.js";import{a as j}from"./axios-CBe-jvwZ.js";import{_ as G}from"./BaseModal-CEaRO6mW.js";import{_ as x}from"./FormInput-C5u5_Gjt.js";import{u as H}from"./useAboutStore-C_7iPY5Q.js";import"./vue-spinner-tail-6jutx_N4.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./stringHelpers-DhATn_QK.js";const K={class:"fixed inset-x-0 top-0 h-14 z-50 bg-white/80 backdrop-blur-md border-b border-gray-100 shadow-sm",role:"navigation"},Q={class:"h-full mx-auto px-4 md:px-6 flex items-center justify-between w-full max-w-none"},X={class:"flex items-center gap-3"},Z={class:"flex items-center gap-3"},ee={class:"hidden sm:block"},te={class:"text-xs text-gray-500 font-bold -mt-0.5"},oe={class:"flex items-center gap-3 relative"},se={class:"relative"},ae={key:0,class:"absolute right-0 mt-2 w-48 bg-white border border-gray-100 rounded-xl shadow-lg overflow-hidden z-50"},ne={class:"space-y-4"},re={__name:"NavBar",setup(C){const a=H(),g=v(null);N(()=>{a.about&&(g.value=a.about),console.log("About in SalePrint --->",a.about?.phone_number)});const n=v(!1),c=v(!1),b=v(!1),p=B({}),t=B({name:"",email:"",phone:"",region:"",password:""}),s=JSON.parse(localStorage.getItem("user")||"{}"),S=M(()=>s?.name?s.name.split(" ").map(m=>m[0]).join("").slice(0,2).toUpperCase():"A"),i=()=>n.value=!n.value,f=m=>{m.target.closest(".relative")||(n.value=!1)};z(()=>document.addEventListener("click",f)),O(()=>document.removeEventListener("click",f));const U=()=>{n.value=!1,c.value=!0,Object.assign(t,{name:s.name||"",email:s.email||"",phone:s.phone||"",region:s.region||"",password:""})},I=async()=>{try{b.value=!0;const m=await j.put("/admin/profile",t);w.fire("Success","Profile updated successfully","success"),localStorage.setItem("user",JSON.stringify(m.data.data)),c.value=!1}catch(m){m.response?.data?.errors?Object.assign(p,m.response.data.errors):w.fire("Error","Something went wrong","error")}finally{b.value=!1}},T=async()=>{if((await w.fire({title:"Logout?",text:"Are you sure you want to log out?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, logout",cancelButtonText:"Cancel",confirmButtonColor:"#EF4444"})).isConfirmed)try{await j.post("/admin/logout")}catch(o){console.error("Logout error:",o)}finally{localStorage.removeItem("token"),localStorage.removeItem("user"),await w.fire("Logged out","You have been logged out successfully.","success"),window.location.reload()}};return(m,o)=>(l(),u(V,null,[e("nav",K,[e("div",Q,[e("div",X,[e("button",{class:"md:hidden p-2 rounded-lg hover:bg-gray-100 transition",onClick:o[0]||(o[0]=d=>m.$emit("toggleSidebar")),"aria-label":"Toggle sidebar"},[...o[7]||(o[7]=[e("i",{class:"pi pi-bars text-gray-700"},null,-1)])]),e("div",Z,[o[9]||(o[9]=e("div",{class:"w-8 h-8 rounded-md bg-gradient-to-tr from-indigo-500 to-indigo-300 flex items-center justify-center text-white font-semibold"}," AD ",-1)),e("div",ee,[o[8]||(o[8]=e("h1",{class:"text-sm md:text-base font-semibold"},"Admin Dashboard",-1)),e("p",te,_(g.value?.name||""),1)])])]),e("div",oe,[e("div",se,[e("button",{onClick:i,class:"w-9 h-9 rounded-full bg-indigo-500 flex items-center justify-center text-white font-medium hover:opacity-90 transition"},_(S.value),1),r(A,{"enter-active-class":"transition duration-150 ease-out","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition duration-100 ease-in","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:y(()=>[n.value?(l(),u("div",ae,[e("div",{class:"py-2"},[e("button",{onClick:U,class:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50 flex items-center gap-2"},[...o[10]||(o[10]=[e("i",{class:"pi pi-user"},null,-1),k(" Profile ",-1)])]),e("button",{onClick:T,class:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2"},[...o[11]||(o[11]=[e("i",{class:"pi pi-sign-out"},null,-1),k(" Logout ",-1)])])])])):h("",!0)]),_:1})])])])]),r(G,{modelValue:c.value,"onUpdate:modelValue":o[6]||(o[6]=d=>c.value=d),title:"Update Profile",onSave:I,disableSaveBtn:b.value},{default:y(()=>[e("div",ne,[r(x,{label:"Name",modelValue:t.name,"onUpdate:modelValue":o[1]||(o[1]=d=>t.name=d),error:p.name},null,8,["modelValue","error"]),r(x,{label:"Email",modelValue:t.email,"onUpdate:modelValue":o[2]||(o[2]=d=>t.email=d),error:p.email},null,8,["modelValue","error"]),r(x,{label:"Phone",modelValue:t.phone,"onUpdate:modelValue":o[3]||(o[3]=d=>t.phone=d),error:p.phone},null,8,["modelValue","error"]),r(x,{label:"Region",modelValue:t.region,"onUpdate:modelValue":o[4]||(o[4]=d=>t.region=d),error:p.region},null,8,["modelValue","error"]),r(x,{label:"Password",type:"password",placeholder:"Leave blank to keep current password",modelValue:t.password,"onUpdate:modelValue":o[5]||(o[5]=d=>t.password=d),error:p.password},null,8,["modelValue","error"])])]),_:1},8,["modelValue","disableSaveBtn"])],64))}},le={class:"h-full flex flex-col bg-white border-r border-gray-200"},ie={class:"md:hidden flex justify-end p-3"},de={class:"flex-1 overflow-y-auto px-2 py-3 space-y-1"},ue=["onClick"],me={class:"flex items-center gap-2"},ce={key:0,class:"ml-8 mt-1 space-y-1"},pe={__name:"SideBar",setup(C){const a=Y(),g=J(),n=v([{name:"Inventory",open:!1,children:[{name:"Item",route:"/admin/item"},{name:"Category",route:"/admin/category"},{name:"Units",route:"/admin/unit"}]},{name:"Sale",open:!1,children:[{name:"Sale",route:"/admin/sale"},{name:"Sales-list",route:"/admin/sale-list"}]},{name:"Supplier",route:"/admin/supplier"},{name:"Report",open:!1,children:[{name:"Sale-Items",route:"/admin/report-sale-items"},{name:"Transactions",route:"/admin/report-transactions"},{name:"All",route:"/admin/report-all"}]},{name:"Credit",route:"/admin/credit-customers"},{name:"Expense",open:!1,children:[{name:"Expense",route:"/admin/expense"},{name:"Category",route:"/admin/expense-category"}]},{name:"Account",open:!1,children:[{name:"Account",route:"/admin/accounts"},{name:"Transaction",route:"/admin/transactions"}]},{name:"Customer",route:"/admin/customer"},{name:"Admins",route:"/admin/admins"},{name:"About",route:"/admin/about"}]),c=t=>{t.children?t.open=!t.open:g.push(t.route)},b=t=>t.children?t.children.some(s=>a.path===s.route):a.path===t.route,p=t=>a.path===t.route;return R(()=>a.path,()=>{n.value.forEach(t=>{t.children&&(t.open=t.children.some(s=>a.path===s.route))})},{immediate:!0}),(t,s)=>{const S=F("router-link");return l(),u("div",le,[e("div",ie,[e("button",{onClick:s[0]||(s[0]=i=>t.$emit("close")),class:"p-2 rounded-md hover:bg-gray-100 transition"}," ✕ ")]),s[3]||(s[3]=e("div",{class:"px-4 py-3 border-b border-gray-100"},[e("div",{class:"text-sm font-semibold"},"Main Menu"),e("div",{class:"text-xs text-gray-500 mt-1"},"Welcome, Admin")],-1)),e("nav",de,[(l(!0),u(V,null,L(n.value,i=>(l(),u("div",{key:i.name},[e("div",{onClick:f=>c(i),class:$(["flex items-center justify-between w-full px-3 py-2 rounded-md cursor-pointer transition",b(i)?"bg-gray-200 font-semibold text-blue-600":"text-gray-700 hover:bg-gray-100"])},[e("span",me,[s[1]||(s[1]=e("span",{class:"w-5 h-5 flex items-center justify-center"}," ☰ ",-1)),k(" "+_(i.name),1)]),i.children?(l(),u("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",class:$(["w-4 h-4 transition-transform",{"rotate-90":i.open}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...s[2]||(s[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)])],2)):h("",!0)],10,ue),r(A,{name:"fade"},{default:y(()=>[i.open&&i.children?(l(),u("div",ce,[(l(!0),u(V,null,L(i.children,f=>(l(),D(S,{key:f.route,to:f.route,class:$(["block px-3 py-1.5 rounded-md text-sm transition",p(f)?"bg-gray-200 font-medium text-blue-600":"text-gray-600 hover:bg-gray-100"])},{default:y(()=>[k(_(f.name),1)]),_:2},1032,["to","class"]))),128))])):h("",!0)]),_:2},1024)]))),128))]),s[4]||(s[4]=e("div",{class:"px-3 py-3 border-t border-gray-100"},[e("button",{class:"w-full text-left px-3 py-2 rounded-md hover:bg-gray-100 transition"}," Settings ")],-1))])}}},E=P(pe,[["__scopeId","data-v-fc0acd74"]]),fe={class:"flex-1 p-0.5 bg-gray-50 overflow-x-auto"},ge={__name:"MainContent",setup(C){return(a,g)=>(l(),u("div",fe,[r(q(W))]))}},ve={class:"min-h-screen bg-gray-100 flex flex-col w-full"},be={class:"flex flex-1 w-full pt-14"},xe={class:"hidden md:flex w-40 bg-white shadow-lg flex-shrink-0"},ye={key:0,class:"fixed left-0 right-0 md:hidden z-50 top-14 w-full max-w-xs bg-white shadow-lg",style:{width:"18rem"}},he={__name:"AdminLayout",setup(C){const a=v(!1);return(g,n)=>(l(),u("div",ve,[r(re,{onToggleSidebar:n[0]||(n[0]=c=>a.value=!a.value)}),e("div",be,[e("aside",xe,[r(E)]),r(A,{name:"slide"},{default:y(()=>[a.value?(l(),u("aside",ye,[r(E,{onClose:n[1]||(n[1]=c=>a.value=!1)})])):h("",!0)]),_:1}),a.value?(l(),u("div",{key:0,onClick:n[2]||(n[2]=c=>a.value=!1),class:"fixed inset-0 z-40 bg-black bg-opacity-40 md:hidden"})):h("",!0),r(ge)])]))}},Le=P(he,[["__scopeId","data-v-0e50c2a8"]]);export{Le as default};
