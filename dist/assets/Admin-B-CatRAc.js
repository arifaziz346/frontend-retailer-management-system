import{a as b}from"./axios-CBe-jvwZ.js";import{V}from"./vue-spinner-tail-BfDaZOI0.js";import{r as v,k as h,s as U,m as z,c as i,a as e,b as n,u as k,f as D,F as M,x as L,q as P,i as R,o as d,t as m,y as T,e as w}from"./index-DRH77bNi.js";import{t as u}from"./toast-BWxgGeSH.js";import{_ as q}from"./BaseModal-DA2S3grq.js";import{_ as g}from"./FormInput-BN9jQn1d.js";import{_ as G}from"./SelectOption-DnQKk7qH.js";import"./stringHelpers-DhATn_QK.js";const H={key:0,class:"fixed inset-0 flex items-center justify-center bg-white/70 backdrop-blur-sm z-50"},I={class:"flex flex-col items-center space-y-3"},J={key:1,class:"flex flex-col min-h-screen bg-gray-50"},K={key:0,class:"fixed inset-0 flex items-center justify-center bg-white/70 z-50"},Q={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between bg-white border-b border-gray-200 px-4 py-3 shadow-sm"},W={class:"flex items-center gap-2"},X={key:1},Y={class:"p-4"},Z={class:"bg-white shadow-md rounded-lg overflow-hidden"},ee={class:"w-full overflow-x-auto"},se={class:"w-full text-sm text-left border-collapse"},te={class:"px-4 py-2"},le={class:"px-4 py-2"},ae={class:"px-4 py-2"},oe={class:"px-4 py-2"},re={class:"px-4 py-2"},ne={class:"px-4 py-2"},ie={class:"px-4 py-2 text-center"},de={class:"flex flex-col sm:flex-row gap-2 justify-center"},ue=["onClick"],pe=["onClick"],me=["onClick"],ce={key:2,class:"flex flex-col items-center justify-center h-[60vh] text-center"},fe={class:"space-y-4"},xe={class:"flex-1"},Ae={__name:"Admin",setup(ye){const A=R(),o=v(!1),p=v(!1),c=v(!1),f=h({admins:{data:[]}}),a=h({id:null,name:"",email:"",phone:"",role:"",status:"active",password:""}),r=h({}),j=[{label:"super_admin",value:"super_admin"},{label:"Saleman",value:"Saleman"},{label:"admin",value:"admin"}],x=()=>{Object.keys(r).forEach(t=>delete r[t])},C=()=>{Object.assign(a,{id:null,name:"",email:"",phone:"",role:"",status:"active",password:""})},y=async(t="users")=>{try{o.value=!0;const s=await b.get(t);f.admins=s.data}catch{u.error("Failed to fetch users")}finally{o.value=!1}},S=async()=>{try{o.value=!0,x();const t=await b.post("/users/register",a);u.success(t.data.message),p.value=!1,y()}catch(t){t.response?.data?.errors?Object.assign(r,t.response.data.errors):u.error("Something went wrong")}finally{o.value=!1}},$=async()=>{try{o.value=!0,x();const t=await b.put(`/users/update/${a.id}`,a);u.success(t.data.message),p.value=!1,y()}catch(t){t.response?.data?.errors?Object.assign(r,t.response.data.errors):u.error("Something went wrong")}finally{o.value=!1}},E=async t=>{if(confirm("Are you sure you want to delete this admin?"))try{o.value=!0;const s=await b.delete(`/users/${t}`);u.success(s.data.message),y()}catch{u.error("Failed to delete admin")}finally{o.value=!1}},N=()=>{c.value=!1,C(),x(),p.value=!0},B=t=>{c.value=!0,x(),Object.assign(a,{id:t.id,name:t.name,email:t.email,phone:t.phone,role:t.role,status:t.status,password:""}),p.value=!0},F=t=>{A.push({name:"admin.permissions-admin",params:{id:t}})};return U(a,()=>{Object.keys(r).forEach(t=>{a[t]&&(r[t]="")})},{deep:!0}),z(()=>{y()}),(t,s)=>o.value?(d(),i("div",H,[e("div",I,[n(k(V),{size:"48px",color:"#2563eb"}),s[9]||(s[9]=e("p",{class:"text-blue-600 text-sm font-medium animate-pulse"}," Loading, please wait... ",-1))])])):(d(),i("div",J,[o.value?(d(),i("div",K,[n(k(V),{size:"48px",color:"#2563eb"})])):D("",!0),e("header",Q,[e("div",W,[e("button",{onClick:s[0]||(s[0]=l=>t.$router.go(-1)),class:"flex items-center text-gray-600 hover:text-blue-600"},[...s[10]||(s[10]=[e("i",{class:"pi pi-arrow-left mr-1"},null,-1),e("span",null,"Back",-1)])]),s[11]||(s[11]=e("h1",{class:"text-lg font-semibold text-gray-800"},"Admins",-1))]),e("button",{class:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1.5 rounded-md flex items-center gap-2",onClick:s[1]||(s[1]=()=>{N(),t.reset()})},[...s[12]||(s[12]=[e("i",{class:"pi pi-plus"},null,-1),e("span",null,"Add Admin",-1)])])]),f.admins.data&&f.admins.data.length?(d(),i("div",X,[e("main",Y,[e("div",Z,[e("div",ee,[e("table",se,[s[16]||(s[16]=e("thead",{class:"bg-gray-100 text-gray-700 uppercase text-xs"},[e("tr",null,[e("th",{class:"px-4 py-3"},"#"),e("th",{class:"px-4 py-3"},"Name"),e("th",{class:"px-4 py-3"},"Email"),e("th",{class:"px-4 py-3"},"Phone"),e("th",{class:"px-4 py-3"},"Role"),e("th",{class:"px-4 py-3"},"Status"),e("th",{class:"px-4 py-3 text-center"},"Action")])],-1)),e("tbody",null,[(d(!0),i(M,null,L(f.admins.data,(l,O)=>(d(),i("tr",{key:l.id,class:"border-b border-gray-300 hover:bg-gray-50"},[e("td",te,m(O+1),1),e("td",le,m(l.name),1),e("td",ae,m(l.email),1),e("td",oe,m(l.phone),1),e("td",re,m(l.role),1),e("td",ne,[e("span",{class:T(["px-2 py-1 rounded-full text-xs font-semibold",l.status==="active"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"])},m(l.status),3)]),e("td",ie,[e("div",de,[e("button",{class:"bg-blue-600 text-white px-3 py-1 rounded-md w-full sm:w-auto text-center",onClick:_=>B(l)},[...s[13]||(s[13]=[e("i",{class:"pi pi-pencil"},null,-1),w(" Edit ",-1)])],8,ue),e("button",{class:"bg-red-600 text-white px-3 py-1 rounded-md w-full sm:w-auto text-center",onClick:_=>E(l.id)},[...s[14]||(s[14]=[e("i",{class:"pi pi-trash"},null,-1),w(" Delete ",-1)])],8,pe),e("button",{class:"bg-green-600 text-white px-3 py-1 rounded-md w-full sm:w-auto text-center",onClick:_=>F(l.id)},[...s[15]||(s[15]=[e("i",{class:"pi pi-eye"},null,-1),w(" View ",-1)])],8,me)])])]))),128))])])])])])])):(d(),i("div",ce,[...s[17]||(s[17]=[e("img",{src:"https://cdn-icons-png.flaticon.com/512/4076/4076549.png",alt:"No Data",class:"w-32 h-32 opacity-70 mb-4"},null,-1),e("h2",{class:"text-xl font-semibold text-gray-700 mb-2"}," No Admin Found ",-1),e("p",{class:"text-gray-500"}," Try adding new admins to see them listed here. ",-1)])])),n(q,{modelValue:p.value,"onUpdate:modelValue":s[7]||(s[7]=l=>p.value=l),title:c.value?"Edit Admin":"Add Admin",onSave:s[8]||(s[8]=l=>c.value?$():S()),disableSaveBtn:o.value},{default:P(()=>[e("div",fe,[n(g,{label:"Name",modelValue:a.name,"onUpdate:modelValue":s[2]||(s[2]=l=>a.name=l),error:r.name},null,8,["modelValue","error"]),n(g,{label:"Email",modelValue:a.email,"onUpdate:modelValue":s[3]||(s[3]=l=>a.email=l),error:r.email},null,8,["modelValue","error"]),n(g,{label:"Phone",modelValue:a.phone,"onUpdate:modelValue":s[4]||(s[4]=l=>a.phone=l),error:r.phone},null,8,["modelValue","error"]),e("div",xe,[n(G,{modelValue:a.role,"onUpdate:modelValue":s[5]||(s[5]=l=>a.role=l),list:j,label:"Select Role",error:r.role},null,8,["modelValue","error"])]),n(g,{label:"Password",type:"password",modelValue:a.password,"onUpdate:modelValue":s[6]||(s[6]=l=>a.password=l),error:r.password},null,8,["modelValue","error"])])]),_:1},8,["modelValue","title","disableSaveBtn"])]))}};export{Ae as default};
