import{r as m,k as y,m as U,c as n,a as e,b,u as w,f as k,q as h,z as $,B as E,t as u,F as L,x as M,e as v,i as F,A as I,o as i,w as A,v as N}from"./index-BcK-tVU9.js";import{f as z}from"./helper-B0BtwXvx.js";import{V as O}from"./vue-spinner-tail-E7jUqB7a.js";import{t as C}from"./toast-BWxgGeSH.js";import{_ as R}from"./BaseModal-D9o4PNkd.js";import{a as f}from"./axios-CBe-jvwZ.js";import{_ as T}from"./Pagination-Dv4VbaTq.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H={key:0,class:"fixed inset-0 flex items-center justify-center bg-slate-900/10 backdrop-blur-md z-50"},G={class:"bg-white p-6 rounded-2xl shadow-xl flex flex-col items-center"},J={key:1,class:"min-h-screen bg-slate-50 p-4 md:p-6 lg:p-8"},K={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-8"},Q={class:"flex items-center gap-4"},W={class:"flex items-center text-xs font-semibold text-slate-400 uppercase tracking-wider mb-1"},X={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8"},Y={class:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm"},Z={class:"text-2xl font-black text-slate-800"},tt={key:1,class:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden"},et={class:"overflow-x-auto"},st={class:"w-full text-left border-collapse"},at={class:"divide-y divide-slate-100"},lt={class:"px-6 py-4 text-sm text-slate-500 font-medium"},ot={class:"px-6 py-4 whitespace-nowrap"},nt={class:"flex items-center gap-3"},it={class:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-500 font-bold text-xs group-hover:bg-blue-100 group-hover:text-blue-600 transition"},rt={class:"text-sm font-bold text-slate-700"},ct={class:"px-6 py-4"},dt={class:"px-3 py-1 rounded-lg bg-slate-100 text-slate-600 font-mono text-sm border border-slate-200"},ut={class:"px-6 py-4"},pt={class:"flex justify-center items-center gap-2"},xt=["onClick"],mt=["onClick"],bt={class:"bg-slate-50/50 border-t border-slate-200 px-6 py-4 flex justify-between items-center"},ft={class:"text-xs text-slate-500 font-medium"},gt={key:2,class:"flex flex-col items-center justify-center py-20 bg-white rounded-3xl border-2 border-dashed border-slate-200"},vt={class:"space-y-6 pt-2 pb-4"},_t={class:"relative"},yt={key:0,class:"mt-2 text-[11px] font-bold text-red-500 flex items-center gap-1"},wt={class:"relative"},kt={__name:"Index_Account",setup(ht){F(),I();const p=m(!1),r=m(!1),c=m(!1),o=y({accounts:[],modal_action:"",employee_name:"",pagination:{currentPage:1,nextPageUrl:null,prevPageUrl:null,lastPage:1}}),a=y({id:"",account_name:"",account_number:""}),g=m(!1),_=()=>{c.value=!0,p.value=!0},V=l=>{a.id=l.id,a.account_name=l.account_name,a.account_number=l.account_number,c.value=!1,p.value=!0},j=async l=>{if(confirm("Do you want to delete..?")){console.log("delete-id",l);try{const d=(await f.delete(`/accounts/${l}`)).data;d.success&&(C.success(d.message),x(a.employee_id))}catch(t){console.log("fail to deleting account-",t)}}},P=async()=>{if(!B())try{r.value=!0;let l="";c.value?l=await f.post("/accounts",a):l=await f.put(`/accounts/${a.id}`,a);const t=l.data;t.success&&(p.value=!1,C.success(t.message),x(a.employee_id),Object.assign(a,{employee_id:"",account_name:""}))}catch(l){console.log("error creating account",l)}finally{r.value=!1}},B=()=>(g.value=a.account_name.trim()==="",g.value?(console.log("log is empty"),!0):(console.log("log is not empty"),!1)),x=async(l="/accounts")=>{try{r.value=!0;const t=await f.get(l),d=t.data.data.data;o.accounts=d;const s=t.data.data;o.pagination.currentPage=s.current_page??1,o.pagination.lastPage=s.last_page??1,o.pagination.nextPageUrl=s.next_page_url??null,o.pagination.prevPageUrl=s.prev_page_url??null}catch(t){console.log("error fetching accounts",t)}finally{r.value=!1}},D=()=>{a.account_name="",a.account_number=""};return U(async()=>{x(a.employee_id)}),(l,t)=>{const d=$("router-link");return r.value?(i(),n("div",H,[e("div",G,[b(w(O),{size:"40px",color:"#2563eb"}),t[6]||(t[6]=e("span",{class:"text-xs font-bold text-blue-600 mt-4 tracking-widest uppercase"},"Loading Accounts",-1))])])):(i(),n("div",J,[e("header",K,[e("div",Q,[e("button",{onClick:t[0]||(t[0]=s=>l.$router.back()),class:"flex items-center justify-center w-10 h-10 rounded-xl bg-white shadow-sm border border-slate-200 hover:bg-slate-50 transition active:scale-95"},[...t[7]||(t[7]=[e("i",{class:"pi pi-arrow-left text-slate-600"},null,-1)])]),e("div",null,[e("nav",W,[b(d,{to:"/admin",class:"hover:text-blue-600 transition"},{default:h(()=>[...t[8]||(t[8]=[v("Admin",-1)])]),_:1}),t[9]||(t[9]=e("i",{class:"pi pi-chevron-right text-[10px] mx-2"},null,-1)),t[10]||(t[10]=e("span",{class:"text-slate-600"},"Accounts",-1))]),t[11]||(t[11]=e("h1",{class:"text-2xl font-black text-slate-800 tracking-tight"},"Account Management",-1))])]),e("button",{onClick:t[1]||(t[1]=()=>{D(),c.value=!1,_()}),class:"flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 active:scale-95 text-white px-6 py-2.5 rounded-xl shadow-lg shadow-blue-200 transition-all font-bold text-sm"},[...t[12]||(t[12]=[e("i",{class:"pi pi-plus-circle text-lg"},null,-1),e("span",null,"Add New Account",-1)])])]),o.accounts?.length?(i(),n("div",X,[e("div",Y,[t[13]||(t[13]=e("div",{class:"flex items-center justify-between mb-2"},[e("span",{class:"text-slate-400 text-[11px] font-bold uppercase tracking-widest"},"Total Accounts"),e("i",{class:"pi pi-wallet text-blue-500"})],-1)),e("p",Z,u(o.accounts.length),1)]),t[14]||(t[14]=E('<div class="bg-white p-5 rounded-2xl border border-slate-200 shadow-sm" data-v-222dcfc4><div class="flex items-center justify-between mb-2" data-v-222dcfc4><span class="text-slate-400 text-[11px] font-bold uppercase tracking-widest" data-v-222dcfc4>Active Status</span><i class="pi pi-check-circle text-green-500" data-v-222dcfc4></i></div><p class="text-2xl font-black text-slate-800" data-v-222dcfc4>Operational</p></div>',1))])):k("",!0),o.accounts&&o.accounts.length?(i(),n("div",tt,[e("div",et,[e("table",st,[t[17]||(t[17]=e("thead",null,[e("tr",{class:"bg-slate-50/50 border-b border-slate-200"},[e("th",{class:"px-6 py-4 text-[11px] font-bold text-slate-500 uppercase tracking-widest"},"Created Date"),e("th",{class:"px-6 py-4 text-[11px] font-bold text-slate-500 uppercase tracking-widest"},"Account Name"),e("th",{class:"px-6 py-4 text-[11px] font-bold text-slate-500 uppercase tracking-widest"},"Account Number"),e("th",{class:"px-6 py-4 text-center text-[11px] font-bold text-slate-500 uppercase tracking-widest"},"Actions")])],-1)),e("tbody",at,[(i(!0),n(L,null,M(o.accounts,s=>(i(),n("tr",{key:s.id,class:"hover:bg-blue-50/30 transition-colors group"},[e("td",lt,u(w(z)(s.created_at)||"-"),1),e("td",ot,[e("div",nt,[e("div",it,u(s.account_name?.charAt(0)),1),e("span",rt,u(s.account_name||"-"),1)])]),e("td",ct,[e("span",dt,u(s.account_number||"-"),1)]),e("td",ut,[e("div",pt,[e("button",{onClick:S=>V(s),class:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-all",title:"Edit Account"},[...t[15]||(t[15]=[e("i",{class:"pi pi-pencil text-sm"},null,-1)])],8,xt),e("button",{onClick:S=>j(s.id),class:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-all",title:"Delete Account"},[...t[16]||(t[16]=[e("i",{class:"pi pi-trash text-sm"},null,-1)])],8,mt)])])]))),128))])])]),e("div",bt,[e("span",ft,"Showing "+u(o.accounts.length)+" items",1),b(T,{pagination:o.pagination,onPageChange:x},null,8,["pagination"])])])):(i(),n("div",gt,[t[19]||(t[19]=e("div",{class:"bg-slate-50 p-6 rounded-full mb-6"},[e("img",{src:"https://cdn-icons-png.flaticon.com/512/4076/4076549.png",alt:"No Data",class:"w-24 h-24 grayscale opacity-40"})],-1)),t[20]||(t[20]=e("h2",{class:"text-2xl font-bold text-slate-800 mb-2"},"No Accounts Linked",-1)),t[21]||(t[21]=e("p",{class:"text-slate-500 text-center max-w-xs mb-8"},"Establish your financial workspace by adding your first bank or cash account.",-1)),e("button",{onClick:_,class:"text-blue-600 font-bold hover:underline flex items-center gap-2"},[...t[18]||(t[18]=[e("i",{class:"pi pi-plus"},null,-1),v(" Add Account Now ",-1)])])])),b(R,{modelValue:p.value,"onUpdate:modelValue":t[4]||(t[4]=s=>p.value=s),title:c.value?"Update Account":"Register New Account",onSave:t[5]||(t[5]=()=>(P(),c.value=!1)),disableSaveBtn:r.value},{default:h(()=>[e("div",vt,[e("div",null,[t[24]||(t[24]=e("label",{for:"account_name",class:"block text-[11px] font-black text-slate-400 uppercase tracking-widest mb-2 ml-1"}," Official Account Name ",-1)),e("div",_t,[t[22]||(t[22]=e("span",{class:"absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400"},[e("i",{class:"pi pi-user text-sm"})],-1)),A(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=s=>a.account_name=s),id:"account_name",placeholder:"e.g. HBL Corporate",class:"block w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none"},null,512),[[N,a.account_name]])]),g.value?(i(),n("p",yt,[...t[23]||(t[23]=[e("i",{class:"pi pi-exclamation-circle"},null,-1),v(" Account name is required ",-1)])])):k("",!0)]),e("div",null,[t[26]||(t[26]=e("label",{for:"account_number",class:"block text-[11px] font-black text-slate-400 uppercase tracking-widest mb-2 ml-1"}," Account / IBAN Number ",-1)),e("div",wt,[t[25]||(t[25]=e("span",{class:"absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400"},[e("i",{class:"pi pi-credit-card text-sm"})],-1)),A(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=s=>a.account_number=s),id:"account_number",placeholder:"0000 0000 0000 0000",class:"block w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none"},null,512),[[N,a.account_number]])])])])]),_:1},8,["modelValue","title","disableSaveBtn"])]))}}},St=q(kt,[["__scopeId","data-v-222dcfc4"]]);export{St as default};
