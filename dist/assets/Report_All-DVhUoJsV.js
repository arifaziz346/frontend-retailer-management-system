import{a as f}from"./axios-BiTBWfu5.js";import{r as c,k as v,p as R,c as l,o,a as t,f as b,w as g,B as D,A as S,v as h,t as m,F as w,q as _,l as F,b as k,u as L}from"./index-gUTQSAyF.js";import{V as $}from"./vue-spinner-tail-BWqZ-Nnh.js";const V={class:"w-full p-4 space-y-4"},C={class:"flex flex-col lg:flex-row lg:items-end gap-3 justify-between w-full flex-wrap"},q={class:"flex flex-wrap gap-3 items-start lg:items-end"},A={key:0},B={key:1},M=["disabled"],N={class:"text-right mt-2 lg:mt-0 text-xs lg:text-sm text-gray-700"},T={class:"overflow-x-auto rounded border border-gray-300 mt-2 shadow-sm"},j={class:"min-w-full text-xs lg:text-sm text-left"},O={class:"bg-gray-100 border-b border-gray-300"},W={key:0},E={key:1},U=["colspan"],Y={__name:"Report",props:{data:{type:Object,required:!0},columns:{type:Array,required:!0},title:{type:String,required:!1},isLoading:{type:Boolean,required:!1,default:!1}},emits:["filter"],setup(n,{emit:d}){const u=d,a=c({type:"daily",start_date:"",end_date:""}),p=c(""),y=c(""),i=()=>{u("filter",{...a.value})};v(()=>{switch(a.value.type){case"daily":return"Daily Report";case"weekly":return"Weekly Report";case"15days":return"15 Days Report";case"6months":return"6 Months Report";case"yearly":return"Yearly Report";case"custom":return"Custom Report";default:return"Report"}});const r=v(()=>{if(a.value.type==="custom")return a.value.start_date&&a.value.end_date?`From ${a.value.start_date} to ${a.value.end_date}`:"Please select start and end dates";const e=new Date().toISOString().slice(0,10);switch(a.value.type){case"daily":return`Date: ${e}`;case"weekly":return`Last 7 days (until ${e})`;case"15days":return`Last 15 days (until ${e})`;case"6months":return`Last 6 months (until ${e})`;case"yearly":return`Current Year (until ${e})`;default:return""}});return R(()=>a.value,()=>{p.value="",y.value=""}),(x,e)=>(o(),l("div",V,[e[7]||(e[7]=t("div",{class:"text-center mb-4"},[t("h1",{class:"text-lg lg:text-xl font-bold"},"Financial Report"),t("p",{class:"text-gray-600 text-xs lg:text-sm"}," View daily, weekly, monthly, and custom reports with sales, profit, expenses, and account details ")],-1)),t("div",C,[t("div",q,[t("div",null,[e[4]||(e[4]=t("label",{class:"text-xs lg:text-sm font-medium"},"Report Type",-1)),g(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>a.value.type=s),onChange:i,class:"w-full border border-gray-300 rounded px-2 py-1 text-xs lg:text-sm"},[...e[3]||(e[3]=[S('<option value="daily">Today</option><option value="weekly">Weekly</option><option value="15days">15 Days</option><option value="6months">6 Months</option><option value="yearly">Yearly</option>',5)])],544),[[D,a.value.type]])]),a.value.type==="custom"?(o(),l("div",A,[e[5]||(e[5]=t("label",{class:"text-xs lg:text-sm font-medium"},"Start Date",-1)),g(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=s=>a.value.start_date=s),class:"border rounded px-2 py-1 text-xs lg:text-sm"},null,512),[[h,a.value.start_date]])])):b("",!0),a.value.type==="custom"?(o(),l("div",B,[e[6]||(e[6]=t("label",{class:"text-xs lg:text-sm font-medium"},"End Date",-1)),g(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=s=>a.value.end_date=s),class:"border rounded px-2 py-1 text-xs lg:text-sm"},null,512),[[h,a.value.end_date]])])):b("",!0),t("button",{class:"bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 transition text-xs lg:text-sm",onClick:i,disabled:n.isLoading},m(n.isLoading?"Wait Generating...":"Generate Report"),9,M)]),t("div",N,[t("p",null,m(y.value||r.value),1)])]),t("div",T,[t("table",j,[t("thead",O,[t("tr",null,[(o(!0),l(w,null,_(n.columns,s=>(o(),l("th",{key:s.key,class:"px-3 py-2 text-gray-700 uppercase font-medium whitespace-nowrap"},m(s.label),1))),128))])]),t("tbody",null,[Object.keys(n.data).length?(o(),l("tr",W,[(o(!0),l(w,null,_(n.columns,s=>(o(),l("td",{key:s.key,class:"px-3 py-2 border-b border-gray-300"},m(n.data[s.key]??0),1))),128))])):(o(),l("tr",E,[t("td",{colspan:n.columns.length,class:"text-center py-6 text-gray-500"}," No data found ",8,U)]))])])])]))}},z={key:0,class:"fixed inset-0 flex items-center justify-center bg-white/70 backdrop-blur-sm z-50"},G={class:"flex flex-col items-center space-y-3"},I={key:1,class:"bg-white p-4 rounded shadow m-1 shadow-1xl h-auto"},K={__name:"Report_All",setup(n){const d=c(!1),u=c([]),a=[{label:"Sale",key:"sale"},{label:"Discount",key:"discount"},{label:"Profit",key:"profit"},{label:"Credit Customer",key:"credit_customer"},{label:"Expense",key:"expense"},{label:"Credit Supplier",key:"credit_supplier"},{label:"Account (Withdraw)",key:"account_withdraw"},{label:"Account (Deposit)",key:"account_deposit"},{label:"Cash in Hand",key:"cash_in_hand"}],p=async i=>{d.value=!0;try{const{data:r}=await f.get("/reports/all",{params:i});u.value=r,console.log("Fetching report with filters:",u.value)}catch(r){console.error("Report error:",r)}finally{d.value=!1}},y=async()=>{const i="2025-10-01",x=new Date(2025,12,31).toISOString().slice(0,10),e=await f.get("/reports/custom-details",{params:{start_date:i,end_date:x}});console.log("Financial Report Details:",e)};return F(()=>{p({type:"daily"}),y()}),(i,r)=>d.value?(o(),l("div",z,[t("div",G,[k(L($),{size:"48px",color:"#2563eb"}),r[0]||(r[0]=t("p",{class:"text-blue-600 text-sm font-medium animate-pulse"}," Loading, please wait... ",-1))])])):(o(),l("div",I,[k(Y,{data:u.value,columns:a,onFilter:p,title:"Financial Report",isLoading:d.value},null,8,["data","isLoading"])]))}};export{K as default};
