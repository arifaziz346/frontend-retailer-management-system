import{d as g,r as n,c as d,a as e,e as w,w as p,f as u,v as c,t as m,g as b,u as y,h,i as k,o as r,n as V}from"./index-BcK-tVU9.js";import{V as _}from"./vue-spinner-tail-E7jUqB7a.js";import{a as S}from"./axios-CBe-jvwZ.js";const L={class:"w-full max-w-md bg-white rounded-2xl shadow-xl p-8 space-y-6 border border-gray-100"},A={key:0,class:"text-red-500 text-sm mt-1"},B={key:0,class:"text-red-500 text-sm mt-1"},D=["disabled"],M={__name:"Login",setup(N){const f=k(),x=g(),l=n(!1),a=n({}),o=n({email:"",password:""}),v=async()=>{l.value=!0,a.value={};try{const{data:t}=await S.post("/admin/login",{email:o.value.email,password:o.value.password});x.setAuth(t.user,t.access_token),await V(),f.replace(t.user.role==="admin"?"/admin/sale":"/user/index")}catch(t){t.response?.status===401?a.value={email:["Invalid email or password"]}:t.response?.data?.errors?a.value=t.response.data.errors:a.value={email:["Server error. Please try again later."]}}finally{l.value=!1}};return(t,s)=>(r(),d("div",L,[s[4]||(s[4]=e("div",{class:"text-center"},[e("h1",{class:"text-3xl font-bold text-gray-800"},"Chitral Steel ðŸ‘‹"),e("p",{class:"text-sm text-gray-500 mt-1"},[w(" Login to continue to "),e("span",{class:"font-semibold text-indigo-600"},"Admin Dashboard")])],-1)),e("form",{onSubmit:h(v,["prevent"]),class:"space-y-5"},[e("div",null,[s[2]||(s[2]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Email Address ",-1)),p(e("input",{type:"email","onUpdate:modelValue":s[0]||(s[0]=i=>o.value.email=i),placeholder:"admin@example.com",autocomplete:"email",class:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-indigo-500"},null,512),[[c,o.value.email,void 0,{trim:!0}]]),a.value.email?(r(),d("p",A,m(a.value.email[0]),1)):u("",!0)]),e("div",null,[s[3]||(s[3]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Password ",-1)),p(e("input",{type:"password","onUpdate:modelValue":s[1]||(s[1]=i=>o.value.password=i),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",autocomplete:"current-password",class:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-indigo-500"},null,512),[[c,o.value.password,void 0,{trim:!0}]]),a.value.password?(r(),d("p",B,m(a.value.password[0]),1)):u("",!0)]),e("button",{type:"submit",disabled:l.value,class:"w-full py-3 bg-indigo-600 text-white rounded-xl font-semibold hover:bg-indigo-700 transition flex justify-center items-center disabled:opacity-60"},[l.value?(r(),b(y(_),{key:0,size:"20px",color:"#fff",class:"mr-2"})):u("",!0),e("span",null,m(l.value?"Logging in...":"Login"),1)],8,D)],32)]))}};export{M as default};
