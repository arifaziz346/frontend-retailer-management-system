import{a as u}from"./axios-CBe-jvwZ.js";import{V as j}from"./vue-spinner-tail-E7jUqB7a.js";import{_ as z}from"./Button-D72mKmq3.js";import{_ as F}from"./BaseModal-D9o4PNkd.js";import{_ as M}from"./FormInput-CW0rZXhQ.js";import{t as x}from"./toast-BWxgGeSH.js";import{u as A}from"./useFormErrors-BWkWHfi_.js";import{r as p,k as v,m as L,c as n,f as _,a as e,b as m,u as U,e as g,q as h,F as w,x as q,o as i,t as C}from"./index-BcK-tVU9.js";import"./stringHelpers-DhATn_QK.js";const O={key:0,class:"fixed inset-0 flex items-center justify-center bg-white/70 backdrop-blur-sm z-50"},T={class:"bg-gray-50 min-h-screen p-4"},G={class:"flex justify-between items-center bg-white p-3 rounded shadow"},H={class:"mt-4 bg-white rounded shadow overflow-x-auto"},I={class:"min-w-full text-sm"},J={class:"px-4 py-2"},K={class:"px-4 py-2"},P={class:"px-4 py-3 flex flex-col sm:flex-row justify-center gap-2"},Q=["onClick"],R=["onClick"],W={key:0},ne={__name:"ExpenseCategory",setup(X){const r=p(!1),l=p(!1),d=p(!1),f=p([]),a=v({id:null,category_name:""}),c=v({category_name:""}),k=A(c),y=async()=>{r.value=!0;try{const s=await u.get("/expense-categories");f.value=s.data.data}finally{r.value=!1}},V=async()=>{r.value=!0;try{d.value?(await u.put(`/expense-categories/${a.id}`,a),x.success("Category updated")):(await u.post("/expense-categories",a),x.success("Category created")),y(),b()}catch(s){k(s)}finally{r.value=!1}},E=()=>{b(),l.value=!0},N=s=>{a.id=s.id,a.category_name=s.category_name,d.value=!0,l.value=!0},$=async s=>{confirm("Delete this category?")&&(await u.delete(`/expense-categories/${s}`),x.success("Deleted"),y())},B=()=>{window.history.back()},b=()=>{a.id=null,a.category_name="",d.value=!1,l.value=!1,Object.keys(c).forEach(s=>c[s]="")};return L(y),(s,t)=>(i(),n(w,null,[r.value?(i(),n("div",O,[m(U(j),{size:"48px",color:"#2563eb"})])):_("",!0),e("div",T,[e("div",G,[e("button",{onClick:B,class:"flex items-center justify-center w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-full text-gray-700"},[...t[2]||(t[2]=[e("i",{class:"pi pi-arrow-left"},null,-1)])]),t[4]||(t[4]=e("h2",{class:"text-lg font-semibold flex items-center gap-2 text-gray-800"},[e("i",{class:"pi pi-tags text-blue-600"}),g(" Expense Categories ")],-1)),m(z,{size:"sm",class:"bg-blue-600 text-white",onClick:E},{default:h(()=>[...t[3]||(t[3]=[e("i",{class:"pi pi-plus mr-1"},null,-1),g(" Add Category ",-1)])]),_:1})]),e("div",H,[e("table",I,[t[8]||(t[8]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left"},"#"),e("th",{class:"px-4 py-2 text-left"},"Category Name"),e("th",{class:"px-4 py-2 text-left"},"Actions")])],-1)),e("tbody",null,[(i(!0),n(w,null,q(f.value,(o,D)=>(i(),n("tr",{key:o.id,class:"border-t border-gray-300"},[e("td",J,C(D+1),1),e("td",K,C(o.category_name),1),e("td",P,[e("button",{onClick:S=>N(o),class:"flex items-center gap-1 px-2 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded-md shadow text-xs"},[...t[5]||(t[5]=[e("i",{class:"pi pi-pencil"},null,-1),g(" Edit ",-1)])],8,Q),e("button",{onClick:S=>$(o.id),class:"flex items-center gap-1 px-2 py-1 bg-red-500 hover:bg-red-600 text-white rounded-md shadow text-xs"},[...t[6]||(t[6]=[e("i",{class:"pi pi-trash"},null,-1),g(" Delete ",-1)])],8,R)])]))),128)),f.value.length?_("",!0):(i(),n("tr",W,[...t[7]||(t[7]=[e("td",{colspan:"3",class:"text-center py-6 text-gray-500"}," No categories found ",-1)])]))])])]),m(F,{modelValue:l.value,"onUpdate:modelValue":t[1]||(t[1]=o=>l.value=o),title:d.value?"Edit Category":"Create Category",onSave:V,disableSaveBtn:r.value},{default:h(()=>[m(M,{id:"category_name",label:"Category Name",modelValue:a.category_name,"onUpdate:modelValue":t[0]||(t[0]=o=>a.category_name=o),error:c.category_name},null,8,["modelValue","error"])]),_:1},8,["modelValue","title","disableSaveBtn"])])],64))}};export{ne as default};
