import{d as x,r as n,c as d,a as e,e as b,w as c,f as u,v as f,t as m,g as w,u as y,h,i as k,o as r}from"./index-SP6IRfbS.js";import{V as L}from"./vue-spinner-tail-odXgjERA.js";import{a as V}from"./axios-BhsMpkwj.js";const _={class:"w-full max-w-md bg-white rounded-2xl shadow-xl p-8 space-y-6 border border-gray-100"},S={key:0,class:"text-red-500 text-sm mt-1"},A={key:0,class:"text-red-500 text-sm mt-1"},B=["disabled"],M={__name:"Login",setup(D){const p=k(),g=x(),l=n(!1),a=n({}),o=n({email:"",password:""}),v=async()=>{l.value=!0,a.value={};try{console.log("ðŸ”¹ Login request started");const{data:s}=await V.post("/admin/login",{email:o.value.email,password:o.value.password});console.log("âœ… Login success:",s),g.setAuth(s.user,s.access_token),s.user.role==="admin"?p.replace("/admin/sale"):p.replace("/user/index")}catch(s){console.error("âŒ Login failed",s),s.response?.status===401?a.value={email:["Invalid email or password"]}:s.response?.data?.errors?a.value=s.response.data.errors:a.value={email:["Server error. Please try again later."]}}finally{l.value=!1}};return(s,t)=>(r(),d("div",_,[t[4]||(t[4]=e("div",{class:"text-center"},[e("h1",{class:"text-3xl font-bold text-gray-800"},"Chitral Steel ðŸ‘‹"),e("p",{class:"text-sm text-gray-500 mt-1"},[b(" Login to continue to "),e("span",{class:"font-semibold text-indigo-600"},"Admin Dashboard")])],-1)),e("form",{onSubmit:h(v,["prevent"]),class:"space-y-5"},[e("div",null,[t[2]||(t[2]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Email Address ",-1)),c(e("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=i=>o.value.email=i),placeholder:"admin@example.com",autocomplete:"email",class:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-indigo-500"},null,512),[[f,o.value.email,void 0,{trim:!0}]]),a.value.email?(r(),d("p",S,m(a.value.email[0]),1)):u("",!0)]),e("div",null,[t[3]||(t[3]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Password ",-1)),c(e("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=i=>o.value.password=i),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",autocomplete:"current-password",class:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-indigo-500"},null,512),[[f,o.value.password,void 0,{trim:!0}]]),a.value.password?(r(),d("p",A,m(a.value.password[0]),1)):u("",!0)]),e("button",{type:"submit",disabled:l.value,class:"w-full py-3 bg-indigo-600 text-white rounded-xl font-semibold hover:bg-indigo-700 transition flex justify-center items-center disabled:opacity-60"},[l.value?(r(),w(y(L),{key:0,size:"20px",color:"#fff",class:"mr-2"})):u("",!0),e("span",null,m(l.value?"Logging in...":"Login"),1)],8,B)],32)]))}};export{M as default};
