import{a as f}from"./axios-DE8_S7fk.js";import{_ as j}from"./Button-22bje1Uj.js";import{_ as D}from"./BaseModal-DRbLze44.js";import{_ as S}from"./FormInput-CF_-DtuM.js";import{B as z}from"./BackButton-JLYBxY_A.js";import{V as L}from"./vue-spinner-tail-C3An_VU4.js";import{t as v}from"./toast-kIWbnzaY.js";import{u as A}from"./useFormErrors-BWkWHfi_.js";import{r as p,j as y,l as I,c as r,a as t,b as c,u as M,n as b,F as q,q as T,o as u,e as g,t as w}from"./index-VsIih__0.js";import"./stringHelpers-DhATn_QK.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./sweetalert2.esm.all-BQxta0Da.js";const G={key:0,class:"fixed inset-0 flex items-center justify-center bg-white/70 backdrop-blur-sm z-50"},H={class:"flex flex-col items-center space-y-3"},J={key:1,class:"flex flex-col min-h-screen bg-gray-50 overflow-x-hidden"},K={class:"bg-white shadow-sm px-4 sm:px-6 py-3 sm:py-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"},O={key:0,class:"p-4 sm:p-6 max-w-5xl mx-auto w-full"},P={class:"overflow-x-auto w-full"},Q={class:"min-w-full bg-white shadow-md rounded-lg overflow-hidden"},R={class:"p-3 text-sm text-gray-700"},W={class:"p-3 text-sm font-medium text-gray-800"},X={class:"p-3 text-sm flex justify-center gap-4"},Y=["onClick"],Z=["onClick"],ee={key:1,class:"flex flex-col items-center justify-center h-[60vh] text-center"},te={class:"bg-white p-4 rounded-lg"},xe={__name:"Unit",setup(se){const l=p(!1),o=p(!1),d=p(!1),m=p(null),n=y({units:[]}),i=y({name:""}),x=y({name:""}),h=A(x),k=async()=>{l.value=!0;try{const s=await f.get("/units");n.units=s.data.data}catch(s){console.error(s)}finally{l.value=!1}},U=()=>{_(),d.value=!1,o.value=!0},V=s=>{_(),d.value=!0,m.value=s.id,i.name=s.name,o.value=!0},C=()=>{d.value?$():E()},E=async()=>{l.value=!0;try{const s=await f.post("/units",i);s.data.success&&(v.success(s.data.message),n.units.unshift(s.data.data),o.value=!1)}catch(s){h(s)}finally{l.value=!1}},$=async()=>{l.value=!0;try{const s=await f.put(`/units/${m.value}`,i);if(s.data.success){v.success(s.data.message);const e=n.units.findIndex(a=>a.id===m.value);e!==-1&&(n.units[e]=s.data.data),o.value=!1}}catch(s){h(s)}finally{l.value=!1}},B=async s=>{if(confirm("Are you sure you want to delete this unit?")){l.value=!0;try{const e=await f.delete(`/units/${s}`);e.data.success&&(v.success(e.data.message),n.units=n.units.filter(a=>a.id!==s))}finally{l.value=!1}}},_=()=>{i.name="",x.name="",m.value=null};return I(k),(s,e)=>l.value?(u(),r("div",G,[t("div",H,[c(M(L),{size:"48px",color:"#2563eb"}),e[2]||(e[2]=t("p",{class:"text-blue-600 text-sm font-medium animate-pulse"}," Loading, please wait... ",-1))])])):(u(),r("div",J,[t("header",K,[c(z),e[4]||(e[4]=t("h1",{class:"text-xl sm:text-2xl font-semibold text-gray-800 tracking-tight"}," Units ",-1)),c(j,{variant:"primary",size:"sm",class:"flex items-center gap-2",onClick:U},{default:b(()=>[...e[3]||(e[3]=[t("i",{class:"pi pi-plus"},null,-1),g(" Unit ",-1)])]),_:1})]),n.units.length?(u(),r("main",O,[t("div",P,[t("table",Q,[e[7]||(e[7]=t("thead",null,[t("tr",{class:"bg-gray-100 text-left text-gray-700 text-sm uppercase"},[t("th",{class:"p-3"},"#"),t("th",{class:"p-3"},"Unit Name"),t("th",{class:"p-3 text-center"},"Actions")])],-1)),t("tbody",null,[(u(!0),r(q,null,T(n.units,(a,F)=>(u(),r("tr",{key:a.id,class:"border-b border-b-gray-200 hover:bg-gray-50"},[t("td",R,w(F+1),1),t("td",W,w(a.name),1),t("td",X,[t("button",{class:"text-blue-600 hover:text-blue-800 flex items-center",onClick:N=>V(a)},[...e[5]||(e[5]=[t("i",{class:"pi pi-pencil mr-1"},null,-1),g(" Edit ",-1)])],8,Y),t("button",{class:"text-red-600 hover:text-red-800 flex items-center",onClick:N=>B(a.id)},[...e[6]||(e[6]=[t("i",{class:"pi pi-trash mr-1"},null,-1),g(" Delete ",-1)])],8,Z)])]))),128))])])])])):(u(),r("div",ee,[...e[8]||(e[8]=[t("h2",{class:"text-xl font-semibold text-gray-700 mb-2"}," No Units Found ",-1),t("p",{class:"text-gray-500"},' Click "Unit" to create your first unit. ',-1)])])),c(D,{modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value=a),title:d.value?"Edit Unit":"Create Unit",onSave:C},{default:b(()=>[t("div",te,[c(S,{id:"name",label:"Unit Name",modelValue:i.name,"onUpdate:modelValue":e[0]||(e[0]=a=>i.name=a),error:x.name},null,8,["modelValue","error"])])]),_:1},8,["modelValue","title"])]))}};export{xe as default};
