import{a as x}from"./axios-CBe-jvwZ.js";import{V as _}from"./vue-spinner-tail-6jutx_N4.js";import{k as y,r as g,m as U,c as i,a as e,b as n,u as V,f as z,F as D,x as F,q as M,i as L,o as d,t as m,y as P,e as w}from"./index-D2-y90KB.js";import{t as b}from"./toast-BWxgGeSH.js";import{_ as R}from"./BaseModal-CEaRO6mW.js";import{_ as v}from"./FormInput-C5u5_Gjt.js";import{_ as T}from"./SelectOption-Cxqc6sAS.js";import"./stringHelpers-DhATn_QK.js";const q={key:0,class:"fixed inset-0 flex items-center justify-center bg-white/70 backdrop-blur-sm z-50"},G={class:"flex flex-col items-center space-y-3"},H={key:1,class:"flex flex-col min-h-screen bg-gray-50"},I={key:0,class:"fixed inset-0 flex items-center justify-center bg-white/70 z-50"},J={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between bg-white border-b border-gray-200 px-4 py-3 shadow-sm"},K={class:"flex items-center gap-2"},Q={key:1},W={class:"p-4"},X={class:"bg-white shadow-md rounded-lg overflow-hidden"},Y={class:"w-full overflow-x-auto"},Z={class:"w-full text-sm text-left border-collapse"},ee={class:"px-4 py-2"},se={class:"px-4 py-2"},te={class:"px-4 py-2"},le={class:"px-4 py-2"},ae={class:"px-4 py-2"},oe={class:"px-4 py-2"},re={class:"px-4 py-2 text-center"},ne={class:"flex flex-col sm:flex-row gap-2 justify-center"},ie=["onClick"],de=["onClick"],ue=["onClick"],me={key:2,class:"flex flex-col items-center justify-center h-[60vh] text-center"},pe={class:"space-y-4"},ce={class:"flex-1"},Ve={__name:"Admin",setup(fe){const p=y({admins:{data:[]}}),k=L(),o=g(!1),u=g(!1),c=g(!1),a=y({id:null,name:"",email:"",phone:"",role:"",status:"active",password:""}),A=[{label:"super_admin",value:"super_admin"},{label:"Saleman",value:"Saleman"},{label:"admin",value:"admin"}];y({});const r=y({}),f=async(l="users")=>{try{o.value=!0;const s=await x.get(l);p.admins=s.data}finally{o.value=!1}},j=()=>{c.value=!1,Object.assign(a,{id:null,name:"",email:"",phone:"",role:"",status:"active",password:""}),r.value={},u.value=!0},C=l=>{c.value=!0,Object.assign(a,l),a.password="",u.value=!0},$=async()=>{try{o.value=!0;const l=await x.post("/users/register",a);b.success(l.data.message),u.value=!1,f()}catch(l){console.log(l),l.response?.data?.errors&&Object.assign(r,l.response.data.errors)}finally{o.value=!1}},S=async()=>{try{o.value=!0;const l=await x.put(`/users/update/${a.id}`,a);b.success(l.data.message),u.value=!1,f()}catch(l){l.response?.data?.errors&&Object.assign(r,l.response.data.errors)}finally{o.value=!1}},N=async l=>{if(confirm("Are you sure you want to delete this admin?"))try{o.value=!0;const s=await x.delete(`/users/${l}`);b.success(s.data.message),f()}catch{b.error("Failed to delete admin")}finally{o.value=!1}},B=l=>{k.push({name:"admin.permissions-admin",params:{id:l}})},E=()=>{Object.assign(a,{id:null,name:"",email:"",phone:"",region:"",status:"active",password:""}),Object.keys(r).forEach(l=>r[l]="")};return U(()=>f()),(l,s)=>o.value?(d(),i("div",q,[e("div",G,[n(V(_),{size:"48px",color:"#2563eb"}),s[9]||(s[9]=e("p",{class:"text-blue-600 text-sm font-medium animate-pulse"}," Loading, please wait... ",-1))])])):(d(),i("div",H,[o.value?(d(),i("div",I,[n(V(_),{size:"48px",color:"#2563eb"})])):z("",!0),e("header",J,[e("div",K,[e("button",{onClick:s[0]||(s[0]=t=>l.$router.go(-1)),class:"flex items-center text-gray-600 hover:text-blue-600"},[...s[10]||(s[10]=[e("i",{class:"pi pi-arrow-left mr-1"},null,-1),e("span",null,"Back",-1)])]),s[11]||(s[11]=e("h1",{class:"text-lg font-semibold text-gray-800"},"Admins",-1))]),e("button",{class:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1.5 rounded-md flex items-center gap-2",onClick:s[1]||(s[1]=()=>{j(),E()})},[...s[12]||(s[12]=[e("i",{class:"pi pi-plus"},null,-1),e("span",null,"Add Admin",-1)])])]),p.admins.data&&p.admins.data.length?(d(),i("div",Q,[e("main",W,[e("div",X,[e("div",Y,[e("table",Z,[s[16]||(s[16]=e("thead",{class:"bg-gray-100 text-gray-700 uppercase text-xs"},[e("tr",null,[e("th",{class:"px-4 py-3"},"#"),e("th",{class:"px-4 py-3"},"Name"),e("th",{class:"px-4 py-3"},"Email"),e("th",{class:"px-4 py-3"},"Phone"),e("th",{class:"px-4 py-3"},"Role"),e("th",{class:"px-4 py-3"},"Status"),e("th",{class:"px-4 py-3 text-center"},"Action")])],-1)),e("tbody",null,[(d(!0),i(D,null,F(p.admins.data,(t,O)=>(d(),i("tr",{key:t.id,class:"border-b border-gray-300 hover:bg-gray-50"},[e("td",ee,m(O+1),1),e("td",se,m(t.name),1),e("td",te,m(t.email),1),e("td",le,m(t.phone),1),e("td",ae,m(t.role),1),e("td",oe,[e("span",{class:P(["px-2 py-1 rounded-full text-xs font-semibold",t.status==="active"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"])},m(t.status),3)]),e("td",re,[e("div",ne,[e("button",{class:"bg-blue-600 text-white px-3 py-1 rounded-md w-full sm:w-auto text-center",onClick:h=>C(t)},[...s[13]||(s[13]=[e("i",{class:"pi pi-pencil"},null,-1),w(" Edit ",-1)])],8,ie),e("button",{class:"bg-red-600 text-white px-3 py-1 rounded-md w-full sm:w-auto text-center",onClick:h=>N(t.id)},[...s[14]||(s[14]=[e("i",{class:"pi pi-trash"},null,-1),w(" Delete ",-1)])],8,de),e("button",{class:"bg-green-600 text-white px-3 py-1 rounded-md w-full sm:w-auto text-center",onClick:h=>B(t.id)},[...s[15]||(s[15]=[e("i",{class:"pi pi-eye"},null,-1),w(" View ",-1)])],8,ue)])])]))),128))])])])])])])):(d(),i("div",me,[...s[17]||(s[17]=[e("img",{src:"https://cdn-icons-png.flaticon.com/512/4076/4076549.png",alt:"No Data",class:"w-32 h-32 opacity-70 mb-4"},null,-1),e("h2",{class:"text-xl font-semibold text-gray-700 mb-2"}," No Admin Found ",-1),e("p",{class:"text-gray-500"}," Try adding new admins to see them listed here. ",-1)])])),n(R,{modelValue:u.value,"onUpdate:modelValue":s[7]||(s[7]=t=>u.value=t),title:c.value?"Edit Admin":"Add Admin",onSave:s[8]||(s[8]=t=>c.value?S():$()),disableSaveBtn:o.value},{default:M(()=>[e("div",pe,[n(v,{label:"Name",modelValue:a.name,"onUpdate:modelValue":s[2]||(s[2]=t=>a.name=t),error:r.name},null,8,["modelValue","error"]),n(v,{label:"Email",modelValue:a.email,"onUpdate:modelValue":s[3]||(s[3]=t=>a.email=t),error:r.email},null,8,["modelValue","error"]),n(v,{label:"Phone",modelValue:a.phone,"onUpdate:modelValue":s[4]||(s[4]=t=>a.phone=t),error:r.phone},null,8,["modelValue","error"]),e("div",ce,[n(T,{modelValue:a.role,"onUpdate:modelValue":s[5]||(s[5]=t=>a.role=t),list:A,label:"Select Role",error:r.role},null,8,["modelValue","error"])]),n(v,{label:"Password",type:"password",modelValue:a.password,"onUpdate:modelValue":s[6]||(s[6]=t=>a.password=t),error:r.password},null,8,["modelValue","error"])])]),_:1},8,["modelValue","title","disableSaveBtn"])]))}};export{Ve as default};
